{"version":3,"file":"2.BDwHphJ9.js","sources":["../../../../../../node_modules/svelte/src/internal/shared/clone.js","../../../../../../node_modules/svelte/src/internal/client/dom/blocks/html.js","../../../../../../node_modules/svelte/src/internal/client/dom/elements/actions.js","../../../../../../node_modules/svelte/src/internal/client/dom/elements/class.js","../../../../../../node_modules/idb/build/index.js","../../../../../../src/ts/cache.ts","../../../../../../src/ts/api.svelte.ts","../../../../../../node_modules/svelecte/dist/settings.js","../../../../../../node_modules/svelecte/dist/utils/fetch.js","../../../../../../node_modules/svelecte/dist/utils/sifter.js","../../../../../../node_modules/svelecte/dist/utils/helpers.js","../../../../../../node_modules/svelte/src/easing/index.js","../../../../../../node_modules/svelte/src/animate/index.js","../../../../../../node_modules/svelecte/dist/utils/dropdown.js","../../../../../../node_modules/svelecte/dist/utils/list.js","../../../../../../node_modules/svelecte/dist/utils/actions.js","../../../../../../node_modules/svelecte/dist/VirtualList.svelte","../../../../../../node_modules/svelecte/dist/Svelecte.svelte","../../../../../../src/routes/+page.svelte"],"sourcesContent":["/** @import { Snapshot } from './types' */\nimport { DEV } from 'esm-env';\nimport * as w from './warnings.js';\nimport { get_prototype_of, is_array, object_prototype } from './utils.js';\n\n/**\n * In dev, we keep track of which properties could not be cloned. In prod\n * we don't bother, but we keep a dummy array around so that the\n * signature stays the same\n * @type {string[]}\n */\nconst empty = [];\n\n/**\n * @template T\n * @param {T} value\n * @param {boolean} [skip_warning]\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nexport function snapshot(value, skip_warning = false, no_tojson = false) {\n\tif (DEV && !skip_warning) {\n\t\t/** @type {string[]} */\n\t\tconst paths = [];\n\n\t\tconst copy = clone(value, new Map(), '', paths, null, no_tojson);\n\t\tif (paths.length === 1 && paths[0] === '') {\n\t\t\t// value could not be cloned\n\t\t\tw.state_snapshot_uncloneable();\n\t\t} else if (paths.length > 0) {\n\t\t\t// some properties could not be cloned\n\t\t\tconst slice = paths.length > 10 ? paths.slice(0, 7) : paths.slice(0, 10);\n\t\t\tconst excess = paths.length - slice.length;\n\n\t\t\tlet uncloned = slice.map((path) => `- <value>${path}`).join('\\n');\n\t\t\tif (excess > 0) uncloned += `\\n- ...and ${excess} more`;\n\n\t\t\tw.state_snapshot_uncloneable(uncloned);\n\t\t}\n\n\t\treturn copy;\n\t}\n\n\treturn clone(value, new Map(), '', empty, null, no_tojson);\n}\n\n/**\n * @template T\n * @param {T} value\n * @param {Map<T, Snapshot<T>>} cloned\n * @param {string} path\n * @param {string[]} paths\n * @param {null | T} [original] The original value, if `value` was produced from a `toJSON` call\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nfunction clone(value, cloned, path, paths, original = null, no_tojson = false) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tvar unwrapped = cloned.get(value);\n\t\tif (unwrapped !== undefined) return unwrapped;\n\n\t\tif (value instanceof Map) return /** @type {Snapshot<T>} */ (new Map(value));\n\t\tif (value instanceof Set) return /** @type {Snapshot<T>} */ (new Set(value));\n\n\t\tif (is_array(value)) {\n\t\t\tvar copy = /** @type {Snapshot<any>} */ (Array(value.length));\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < value.length; i += 1) {\n\t\t\t\tvar element = value[i];\n\t\t\t\tif (i in value) {\n\t\t\t\t\tcopy[i] = clone(element, cloned, DEV ? `${path}[${i}]` : path, paths, null, no_tojson);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (get_prototype_of(value) === object_prototype) {\n\t\t\t/** @type {Snapshot<any>} */\n\t\t\tcopy = {};\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var key in value) {\n\t\t\t\tcopy[key] = clone(\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tvalue[key],\n\t\t\t\t\tcloned,\n\t\t\t\t\tDEV ? `${path}.${key}` : path,\n\t\t\t\t\tpaths,\n\t\t\t\t\tnull,\n\t\t\t\t\tno_tojson\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (value instanceof Date) {\n\t\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t\t}\n\n\t\tif (typeof (/** @type {T & { toJSON?: any } } */ (value).toJSON) === 'function' && !no_tojson) {\n\t\t\treturn clone(\n\t\t\t\t/** @type {T & { toJSON(): any } } */ (value).toJSON(),\n\t\t\t\tcloned,\n\t\t\t\tDEV ? `${path}.toJSON()` : path,\n\t\t\t\tpaths,\n\t\t\t\t// Associate the instance with the toJSON clone\n\t\t\t\tvalue\n\t\t\t);\n\t\t}\n\t}\n\n\tif (value instanceof EventTarget) {\n\t\t// can't be cloned\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n\n\ttry {\n\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t} catch (e) {\n\t\tif (DEV) {\n\t\t\tpaths.push(path);\n\t\t}\n\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\nimport { COMMENT_NODE } from '#client/constants';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes_start !== null) {\n\t\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\t\teffect.nodes_start = effect.nodes_end = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (\n\t\t\t\tnext !== null &&\n\t\t\t\t(next.nodeType !== COMMENT_NODE || /** @type {Comment} */ (next).data !== '')\n\t\t\t) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = /** @type {TemplateNode} */ (get_next_sibling(next));\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {Node} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n","/** @import { ActionPayload } from '#client' */\nimport { effect, render_effect } from '../../reactivity/effects.js';\nimport { safe_not_equal } from '../../reactivity/equality.js';\nimport { deep_read_state, untrack } from '../../runtime.js';\n\n/**\n * @template P\n * @param {Element} dom\n * @param {(dom: Element, value?: P) => ActionPayload<P>} action\n * @param {() => P} [get_value]\n * @returns {void}\n */\nexport function action(dom, action, get_value) {\n\teffect(() => {\n\t\tvar payload = untrack(() => action(dom, get_value?.()) || {});\n\n\t\tif (get_value && payload?.update) {\n\t\t\tvar inited = false;\n\t\t\t/** @type {P} */\n\t\t\tvar prev = /** @type {any} */ ({}); // initialize with something so it's never equal on first run\n\n\t\t\trender_effect(() => {\n\t\t\t\tvar value = get_value();\n\n\t\t\t\t// Action's update method is coarse-grained, i.e. when anything in the passed value changes, update.\n\t\t\t\t// This works in legacy mode because of mutable_source being updated as a whole, but when using $state\n\t\t\t\t// together with actions and mutation, it wouldn't notice the change without a deep read.\n\t\t\t\tdeep_read_state(value);\n\n\t\t\t\tif (inited && safe_not_equal(prev, value)) {\n\t\t\t\t\tprev = value;\n\t\t\t\t\t/** @type {Function} */ (payload.update)(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinited = true;\n\t\t}\n\n\t\tif (payload?.destroy) {\n\t\t\treturn () => /** @type {Function} */ (payload.destroy)();\n\t\t}\n\t});\n}\n","import { to_class } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element} dom\n * @param {boolean | number} is_html\n * @param {string | null} value\n * @param {string} [hash]\n * @param {Record<string, any>} [prev_classes]\n * @param {Record<string, any>} [next_classes]\n * @returns {Record<string, boolean> | undefined}\n */\nexport function set_class(dom, is_html, value, hash, prev_classes, next_classes) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev = dom.__className;\n\n\tif (\n\t\thydrating ||\n\t\tprev !== value ||\n\t\tprev === undefined // for edge case of `class={undefined}`\n\t) {\n\t\tvar next_class_name = to_class(value, hash, next_classes);\n\n\t\tif (!hydrating || next_class_name !== dom.getAttribute('class')) {\n\t\t\t// Removing the attribute when the value is only an empty string causes\n\t\t\t// performance issues vs simply making the className an empty string. So\n\t\t\t// we should only remove the class if the value is nullish\n\t\t\t// and there no hash/directives :\n\t\t\tif (next_class_name == null) {\n\t\t\t\tdom.removeAttribute('class');\n\t\t\t} else if (is_html) {\n\t\t\t\tdom.className = next_class_name;\n\t\t\t} else {\n\t\t\t\tdom.setAttribute('class', next_class_name);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = value;\n\t} else if (next_classes && prev_classes !== next_classes) {\n\t\tfor (var key in next_classes) {\n\t\t\tvar is_present = !!next_classes[key];\n\n\t\t\tif (prev_classes == null || is_present !== !!prev_classes[key]) {\n\t\t\t\tdom.classList.toggle(key, is_present);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn next_classes;\n}\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst transactionDoneMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    // This mapping exists in reverseTransformCache but doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(this.request);\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nconst advanceMethodProps = ['continue', 'continuePrimaryKey', 'advance'];\nconst methodMap = {};\nconst advanceResults = new WeakMap();\nconst ittrProxiedCursorToOriginalProxy = new WeakMap();\nconst cursorIteratorTraps = {\n    get(target, prop) {\n        if (!advanceMethodProps.includes(prop))\n            return target[prop];\n        let cachedFunc = methodMap[prop];\n        if (!cachedFunc) {\n            cachedFunc = methodMap[prop] = function (...args) {\n                advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));\n            };\n        }\n        return cachedFunc;\n    },\n};\nasync function* iterate(...args) {\n    // tslint:disable-next-line:no-this-assignment\n    let cursor = this;\n    if (!(cursor instanceof IDBCursor)) {\n        cursor = await cursor.openCursor(...args);\n    }\n    if (!cursor)\n        return;\n    cursor = cursor;\n    const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);\n    ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);\n    // Map this double-proxy back to the original, so other cursor methods work.\n    reverseTransformCache.set(proxiedCursor, unwrap(cursor));\n    while (cursor) {\n        yield proxiedCursor;\n        // If one of the advancing methods was not called, call continue().\n        cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());\n        advanceResults.delete(proxiedCursor);\n    }\n}\nfunction isIteratorProp(target, prop) {\n    return ((prop === Symbol.asyncIterator &&\n        instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor])) ||\n        (prop === 'iterate' && instanceOfAny(target, [IDBIndex, IDBObjectStore])));\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get(target, prop, receiver) {\n        if (isIteratorProp(target, prop))\n            return iterate;\n        return oldTraps.get(target, prop, receiver);\n    },\n    has(target, prop) {\n        return isIteratorProp(target, prop) || oldTraps.has(target, prop);\n    },\n}));\n\nexport { deleteDB, openDB, unwrap, wrap };\n","// curveCache.js\nimport { openDB } from 'idb';\n\nconst DB_NAME = 'ApCacheDB';\nconst STORE_NAME = 'ap';\nconst DB_VERSION = 2;\nconst EXPIRATION_MS = 1 * 60 * 1000; // 1 minute\n\n// Initialize or open the database\nasync function getDB() {\n  return openDB(DB_NAME, DB_VERSION, {\n    upgrade(db) {\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME);\n      }\n    }\n  });\n}\n\n// Store curve data with a timestamp\nexport async function setCache(key, data) {\n  const db = await getDB();\n  await db.put(STORE_NAME, { data, timestamp: Date.now() }, key);\n}\n\n// Get cached curve if not expired\nexport async function getCache(key) {\n  const db = await getDB();\n  const entry = await db.get(STORE_NAME, key);\n\n  if (!entry) return null;\n\n  const isExpired = (Date.now() - entry.timestamp) > EXPIRATION_MS;\n  if (isExpired) {\n    await db.delete(STORE_NAME, key);\n    return null;\n  }\n\n  return entry.data;\n}\n\n// Clear one or all cached entries\nexport async function clearCache(key) {\n  const db = await getDB();\n  await db.delete(STORE_NAME, key);\n}\n\nexport async function clearAll() {\n  const db = await getDB();\n  await db.clear(STORE_NAME);\n}\n","import { State, API_URL } from \"./store.svelte\";\nimport { getCache, setCache } from './cache.js';\n\n// NEW: accept optional age filter (0|1|2|'all') and return the new foldersâ†’usersâ†’ages shape\ntype AgeMini = { count: number; size: number; disk: number; mtime: number };\n// Accept optional age filter (0 | 1 | 2 | 'all') and pass it through.\ntype ScannedFile = { path: string; size: number; modified: string; owner: string };\nexport type RawFolder = { path: string; users: Record<string, Record<'0'|'1'|'2', AgeMini>> };\n\n\nclass Api {\n  private baseUrl = `${API_URL}/`;\n  public error: string = \"\";\n\n  private async request<T>(\n    endpoint: string = \"\",\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" = \"GET\",\n    body?: unknown,\n    use_cache?: boolean\n  ): Promise<T | null> {\n    try {\n      this.error = \"\";\n\n      const options: RequestInit = {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${State.token}`,\n        },\n      };\n\n      if (body) \n        options.body = JSON.stringify(body);\n\n      if (use_cache) {        \n        let data = await getCache(endpoint);\n        if (data) {\n          //console.log(\"Data from cache:\", endpoint);\n          return data    \n        }\n      }\n      const url = `${this.baseUrl}${endpoint}`\n      console.log('fetching url:', url, options)\n\n      const response = await fetch(url, options);\n      const data: T = await response.json();\n      if (!response.ok) {\n        // do this to redirect to login\n        State.token = null\n        if (response.status === 401) {\n          console.log('authentication failed.')\n        }\n        this.error = (data as any).detail || \"Unknown API error\";\n        console.log(`API Error: ${this.error}`);\n        return null;\n      }\n\n      // const data = await fetchWithIndexedDB(`${this.baseUrl}${endpoint}`, options);\n      await setCache(endpoint, data)\n          \n      return data;\n\n    } catch (err) {\n      console.log(\"Fetch error:\", err);\n      this.error = \"API: Error in fetching data.\";\n      return null;\n\n    } finally {\n\n    }\n  }\n\n  async getUsers(): Promise<string[]> {\n    let result = await this.request<string[]>('users', \"GET\", undefined, true)\n    return result ?? []\n  }\n\n  async getFolders(path: string, users: string[], age?: number): Promise<RawFolder[]> {\n    const pathParam = `path=${encodeURIComponent(path)}`\n    const userParam = users.length > 0 ? `&users=${encodeURIComponent(users.join(','))}` : '';\n    const ageParam = age !== undefined && age !== -1 ? `&age=${age}` : ''\n    const url = `folders?${pathParam}${userParam}${ageParam}`\n    console.log('api url:', url)\n    let result = await this.request<RawFolder[]>(url, \"GET\", undefined, true)\n    return result ?? []\n  }\n\n  async getFiles(path: string, users: string[], age?: number): Promise<ScannedFile[]> {\n    const pathParam = `path=${encodeURIComponent(path)}`\n    const userParam = users.length > 0 ? `&users=${encodeURIComponent(users.join(','))}` : ''\n    const ageParam = age !== undefined && age !== -1 ? `&age=${age}` : ''\n    const url = `files?${pathParam}${userParam}${ageParam}`\n    console.log('api url:', url)\n    let result = await this.request<ScannedFile[]>(url, \"GET\", undefined, true)\n    return result ?? []\n  }\n\n  // async createItem(Item: Partial<Item>): Promise<Item | null> {\n  //   return await this.request<Item>(\"Items\", \"POST\", Item);\n  // }\n\n  // async updateItem(id: number, Item: Partial<Item>): Promise<Item | null> {\n  //   return await this.request<Item>(`Items/${id}`, \"PUT\", Item);\n  // }\n\n  // async deleteItem(id: number): Promise<boolean> {\n  //   return (await this.request<{ success: boolean }>(`Items/${id}`, \"DELETE\"))?.success ?? false;\n  // }\n\n}\n\nexport const api = new Api();\n\n","/**\n * @callback i18n_max\n * @param {number} max\n * @returns {string}\n *\n * @callback i18n_fetchQuery\n * @param {number} minQuery\n * @param {number} inputLength\n * @returns {string}\n *\n * @callback i18n_collapsedSelection\n * @param {number} count\n * @returns {string}\n *\n * @callback i18n_createRowLabel\n * @param {string} value\n * @returns {string}\n *\n * @callback i18n_aria_selection\n * @param {string[]} opts\n * @returns {string}\n *\n * @callback i18n_aria_listActive\n * @param {object} opt\n * @param {string} labelField\n * @param {number} resultCount\n * @returns {string}\n *\n * @callback i18n_aria_inputFocus\n * @returns {string}\n *\n * @callback i18n_aria_removeItemLabel\n * @param {object} item\n * @param {string} labelField\n * @returns {string}\n *\n *\n * @typedef {object} I18nObject\n * @property {string} empty\n * @property {string} nomatch\n * @property {i18n_max} max\n * @property {string} fetchBefore\n * @property {i18n_fetchQuery} fetchQuery\n * @property {string} fetchInit\n * @property {string} fetchEmpty\n * @property {i18n_collapsedSelection} collapsedSelection\n * @property {i18n_createRowLabel} createRowLabel\n * @property {string} emptyCreatable\n * @property {i18n_aria_selection} aria_selected\n * @property {i18n_aria_listActive} aria_listActive\n * @property {i18n_aria_inputFocus} aria_inputFocused\n * @property {i18n_aria_removeItemLabel} aria_removeItemLabel\n * @property {string} aria_label\n * @property {string} aria_describedby\n *\n * @typedef {object} Settings\n * @property {string|null} valueField\n * @property {string|null} labelField\n * @property {string} groupLabelField\n * @property {string} groupItemsField\n * @property {string} disabledField\n * @property {string} placeholder\n * @property {boolean} valueAsObject\n * @property {boolean} searchable\n * @property {boolean} clearable\n * @property {boolean} highlightFirstItem\n * @property {boolean|'select-navigate'} selectOnTab\n * @property {boolean} resetOnBlur\n * @property {boolean} resetOnSelect\n * @property {object} fetchProps\n * @property {boolean} fetchResetOnBlur\n * @property {number} fetchDebounceTime\n * @property {boolean} multiple\n * @property {boolean|string} closeAfterSelect\n * @property {'native'|'toggle'|'none'} deselectMode\n * @property {number} max\n * @property {'blur'|'always'|null} collapseSelection\n * @property {'auto'|boolean} keepSelectionInList\n * @property {boolean} creatable\n * @property {string} creatablePrefix\n * @property {boolean} keepCreated\n * @property {boolean} allowEditing\n * @property {string} delimiter\n * @property {function|undefined} [fetchCallback]\n * @property {number} minQuery\n * @property {boolean} lazyDropdown\n * @property {boolean} virtualList\n * @property {number|undefined} [vlItemSize]\n * @property {I18nObject} i18n\n * @property {import(\"./utils/fetch\").RequestFactoryFn} requestFactory\n */\nconst /**@type {Settings} */ settings = {\n  // basic\n  valueField: null,\n  labelField: null,\n  groupLabelField: 'label',\n  groupItemsField: 'options',\n  disabledField: '$disabled',\n  placeholder: 'Select',\n  valueAsObject: false,\n  // ui\n  searchable: true,\n  clearable: false,\n  highlightFirstItem: true,\n  selectOnTab: false,\n  resetOnBlur: true,\n  resetOnSelect: true,\n  fetchProps: {},\n  fetchResetOnBlur: true,\n  fetchDebounceTime: 300,\n  // multi\n  multiple: false,\n  closeAfterSelect: 'auto',\n  deselectMode: 'toggle',\n  max: 0,\n  collapseSelection: null,\n  keepSelectionInList: 'auto',\n  // create\n  creatable: false,\n  creatablePrefix: '*',\n  keepCreated: true,\n  allowEditing: false,\n  delimiter: ',',\n  // remote\n  fetchCallback: undefined,\n  minQuery: 1,\n  // performance\n  lazyDropdown: true,\n  // virtual list\n  virtualList: false,\n  vlItemSize: undefined,\n  // i18n\n  i18n: {\n    aria_label: '',\n    aria_describedby: '',\n    aria_selected: (opts) => opts.length ? `Option${opts.length > 1 ? 's' : ''} ${opts.join(', ')} selected.` : '',\n    aria_listActive: (opt, labelField, count) => `You are currently focused on option ${opt[labelField]}. ${count} result${count>1?'s': ''} available.`,\n    aria_inputFocused: () => 'Select is focused, type to refine list, press down to scroll through the list',\n    aria_removeItemLabel: (opt, labelField) => `Remove item`,\n    empty: 'No options',\n    nomatch: 'No matching options',\n    max: num => `Maximum items ${num} selected`,\n    fetchBefore: 'Type to start searching',\n    fetchQuery: (minQuery, inputLength) => `Type at least ${minQuery} character${\n        minQuery > 1 ? 's' : ''\n      } to start searching`\n    ,\n    fetchInit: 'Fetching data, please wait...',\n    fetchEmpty: 'No data related to your search',\n    collapsedSelection: count => `${count} selected`,\n    createRowLabel: value => `Add '${value}'`,\n    emptyCreatable: 'Add new by typing'\n  },\n  // @ts-ignore\n  requestFactory: undefined\n}\n\nexport default settings;\n","/**\n * Simple debouncer\n *\n * @param {function} fn\n * @param {number} delay\n * @returns fn\n */\nexport function debounce(fn, delay) {\n  let timeout;\n\treturn (...args) => {\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(() => {\n      fn.apply(this, args);\n\t\t}, delay);\n\t};\n};\n\n/**\n * @callback RequestFactoryFn\n * @param {string} query\n * @param {{\n *  url: ?string,\n *  parentValue: string|number|null|undefined,\n *  initial: string|number|string[]|null\n *  }} props\n * @param {RequestInit|object} fetchProps\n * @returns {{\n *  request: Request\n *  controller: AbortController\n * }}\n */\n\n/**\n * Built-in fetch request factory\n *\n * @type {RequestFactoryFn}\n */\nexport function requestFactory(query, { url, parentValue, initial }, fetchProps) {\n  if (parentValue) {\n    url = url.replace('[parent]', encodeURIComponent(parentValue));\n  }\n  if (query) {\n    url = url.replace('[query]', encodeURIComponent(query));\n  }\n  if (Array.isArray(initial) && initial.length === 0) initial = null;\n  if (initial) {\n    url = url.replace('[query]', 'init');\n  }\n  const fetchUrl = url[0] === '/'\n    ? new URL(url, window.location.origin)\n    : new URL(url);\n\n  if (initial) {\n    const arr = Array.isArray(initial) ? initial : [initial];\n    fetchUrl.searchParams.append('init', arr.join(','));\n  }\n  const controller = new AbortController();\n  const props = Object.assign({}, fetchProps, { signal: controller.signal });\n  return {\n    request: new Request(fetchUrl, props),\n    controller: controller\n  };\n}\n","/**\n * sifter.js\n * Copyright (c) 2013â€“2020 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n/**\n * NOTE: Extend tokenize params with 'startOnly'\n *\n * @author Martin Skocik <mskocik@gmail.com>\n */\n\n/**\n * Textually searches arrays and hashes of objects\n * by property (or multiple properties). Designed\n * specifically for autocomplete.\n *\n * @constructor\n * @param {array|object} items\n * @param {object} [settings]\n */\nvar Sifter = function(items, settings) {\n    this.items = items;\n    this.settings = settings || {diacritics: true};\n};\n\n/**\n * Splits a search string into an array of individual\n * regexps to be used to match results.\n *\n * @param {string} query\n * @param {boolean?} respect_word_boundary\n * @param {boolean?} start_only\n * @returns {array}\n */\nSifter.prototype.tokenize = function(query, respect_word_boundary, start_only) {\n    query = trim(String(query || '').toLowerCase());\n    if (!query || !query.length) return [];\n\n    var i, n, regex, letter;\n    var tokens = [];\n    var words = query.split(/ +/);\n\n    for (i = 0, n = words.length; i < n; i++) {\n        regex = escape_regex(words[i]);\n        if (this.settings.diacritics) {\n            for (letter in DIACRITICS) {\n                if (DIACRITICS.hasOwnProperty(letter)) {\n                    regex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\n                }\n            }\n        }\n        if (respect_word_boundary) {\n          regex = \"\\\\b\"+regex;\n        } else if (start_only) regex = \"\\\\b^\"+regex;\n\n        tokens.push({\n            string : words[i],\n            regex  : new RegExp(regex, 'i')\n        });\n    }\n\n    return tokens;\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * this.iterator(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n * @param {array|object} object\n */\nSifter.prototype.iterator = function(object, callback) {\n    var iterator;\n    if (Array.isArray(object)) {\n        iterator = Array.prototype.forEach || function(callback) {\n            for (var i = 0, n = this.length; i < n; i++) {\n                callback(this[i], i, this);\n            }\n        };\n    } else {\n        iterator = function(callback) {\n            for (var key in this) {\n                if (this.hasOwnProperty(key)) {\n                    callback(this[key], key, this);\n                }\n            }\n        };\n    }\n\n    iterator.apply(object, [callback]);\n};\n\n/**\n * Returns a function to be used to score individual results.\n *\n * Good matches will have a higher score than poor matches.\n * If an item is not a match, 0 will be returned by the function.\n *\n * @param {object|string} search\n * @param {object} [options]\n * @returns {function}\n */\nSifter.prototype.getScoreFunction = function(search, options) {\n    var self, fields, tokens, token_count, nesting;\n\n    self        = this;\n    search      = self.prepareSearch(search, options);\n    tokens      = search.tokens;\n    fields      = search.options.fields;\n    token_count = tokens.length;\n    nesting     = search.options.nesting;\n\n    /**\n     * Calculates how close of a match the\n     * given value is against a search token.\n     *\n     * @param {string | number} value\n     * @param {object} token\n     * @return {number}\n     */\n    var scoreValue = function(value, token) {\n        var score, pos;\n\n        if (!value) return 0;\n        value = String(value || '');\n        pos = value.search(token.regex);\n        if (pos === -1) return 0;\n        score = token.string.length / value.length;\n        if (pos === 0) score += 0.5;\n        return score;\n    };\n\n    /**\n     * Calculates the score of an object\n     * against the search query.\n     *\n     * @param {object} token\n     * @param {object} data\n     * @return {number}\n     */\n    var scoreObject = (function() {\n        var field_count = fields.length;\n        if (!field_count) {\n            return function() { return 0; };\n        }\n        if (field_count === 1) {\n            return function(token, data) {\n                return scoreValue(getattr(data, fields[0], nesting), token);\n            };\n        }\n        return function(token, data) {\n            for (var i = 0, sum = 0; i < field_count; i++) {\n                sum += scoreValue(getattr(data, fields[i], nesting), token);\n            }\n            return sum / field_count;\n        };\n    })();\n\n    if (!token_count) {\n        return function() { return 0; };\n    }\n    if (token_count === 1) {\n        return function(data) {\n            return scoreObject(tokens[0], data);\n        };\n    }\n\n    if (search.options.conjunction === 'and') {\n        return function(data) {\n            var score;\n            for (var i = 0, sum = 0; i < token_count; i++) {\n                score = scoreObject(tokens[i], data);\n                if (score <= 0) return 0;\n                sum += score;\n            }\n            return sum / token_count;\n        };\n    } else {\n        return function(data) {\n            for (var i = 0, sum = 0; i < token_count; i++) {\n                sum += scoreObject(tokens[i], data);\n            }\n            return sum / token_count;\n        };\n    }\n};\n\n/**\n * Returns a function that can be used to compare two\n * results, for sorting purposes. If no sorting should\n * be performed, `null` will be returned.\n *\n * @param {string|object} search\n * @param {object} options\n * @return function(a,b)\n */\nSifter.prototype.getSortFunction = function(search, options) {\n    var i, n, self, field, fields, fields_count, multiplier, multipliers, get_field, implicit_score, sort;\n\n    self   = this;\n    search = self.prepareSearch(search, options);\n    sort   = (!search.query && options.sort_empty) || options.sort;\n\n    /**\n     * Fetches the specified sort field value\n     * from a search result item.\n     *\n     * @param  {string} name\n     * @param  {object} result\n     */\n    get_field = function(name, result) {\n        if (name === '$score') return result.score;\n        return getattr(self.items[result.id], name, options.nesting);\n    };\n\n    // parse options\n    fields = [];\n    if (sort) {\n        for (i = 0, n = sort.length; i < n; i++) {\n            if (search.query || sort[i].field !== '$score') {\n                fields.push(sort[i]);\n            }\n        }\n    }\n\n    // the \"$score\" field is implied to be the primary\n    // sort field, unless it's manually specified\n    if (search.query) {\n        implicit_score = true;\n        for (i = 0, n = fields.length; i < n; i++) {\n            if (fields[i].field === '$score') {\n                implicit_score = false;\n                break;\n            }\n        }\n        if (implicit_score) {\n            fields.unshift({field: '$score', direction: 'desc'});\n        }\n    } else {\n        for (i = 0, n = fields.length; i < n; i++) {\n            if (fields[i].field === '$score') {\n                fields.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    multipliers = [];\n    for (i = 0, n = fields.length; i < n; i++) {\n        multipliers.push(fields[i].direction === 'desc' ? -1 : 1);\n    }\n\n    // build function\n    fields_count = fields.length;\n    if (!fields_count) {\n        return null;\n    } else if (fields_count === 1) {\n        field = fields[0].field;\n        multiplier = multipliers[0];\n        return function(a, b) {\n            return multiplier * cmp(\n                get_field(field, a),\n                get_field(field, b)\n            );\n        };\n    } else {\n        return function(a, b) {\n            var i, result, a_value, b_value, field;\n            for (i = 0; i < fields_count; i++) {\n                field = fields[i].field;\n                result = multipliers[i] * cmp(\n                    get_field(field, a),\n                    get_field(field, b)\n                );\n                if (result) return result;\n            }\n            return 0;\n        };\n    }\n};\n\n/**\n * Parses a search query and returns an object\n * with tokens and fields ready to be populated\n * with results.\n *\n * @param {string} query\n * @param {object} options\n * @returns {object}\n */\nSifter.prototype.prepareSearch = function(query, options) {\n    if (typeof query === 'object') return query;\n\n    options = extend({}, options);\n\n    var option_fields     = options.fields;\n    var option_sort       = options.sort;\n    var option_sort_empty = options.sort_empty;\n\n    if (option_fields && !Array.isArray(option_fields)) options.fields = [option_fields];\n    if (option_sort && !Array.isArray(option_sort)) options.sort = [option_sort];\n    if (option_sort_empty && !Array.isArray(option_sort_empty)) options.sort_empty = [option_sort_empty];\n\n    return {\n        options : options,\n        query   : String(query || '').toLowerCase(),\n        tokens  : this.tokenize(query, options.wordsOnly, options.startOnly),\n        total   : 0,\n        items   : []\n    };\n};\n\n/**\n * Searches through all items and returns a sorted array of matches.\n *\n * The `options` parameter can contain:\n *\n *   - fields {string|array}\n *   - sort {array}\n *   - score {function}\n *   - filter {bool}\n *   - limit {integer}\n *\n * Returns an object containing:\n *\n *   - options {object}\n *   - query {string}\n *   - tokens {array}\n *   - total {int}\n *   - items {array}\n *\n * @param {string} query\n * @param {object} options\n * @returns {object}\n */\nSifter.prototype.search = function(query, options) {\n    var self = this, value, score, search, calculateScore;\n    var fn_sort;\n    var fn_score;\n\n    search  = this.prepareSearch(query, options);\n    options = search.options;\n    query   = search.query;\n\n    // generate result scoring function\n    fn_score = options.score || self.getScoreFunction(search);\n\n    // perform search and sort\n    if (query.length) {\n        self.iterator(self.items, function(item, id) {\n            score = fn_score(item);\n            if (options.filter === false || score > 0) {\n                search.items.push({'score': score, 'id': id});\n            }\n        });\n    } else {\n        self.iterator(self.items, function(item, id) {\n            search.items.push({'score': 1, 'id': id});\n        });\n    }\n\n    fn_sort = self.getSortFunction(search, options);\n    if (fn_sort) search.items.sort(fn_sort);\n\n    // apply limits\n    search.total = search.items.length;\n    if (typeof options.limit === 'number') {\n        search.items = search.items.slice(0, options.limit);\n    }\n\n    return search;\n};\n\n// utilities\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\nvar cmp = function(a, b) {\n    if (typeof a === 'number' && typeof b === 'number') {\n        return a > b ? 1 : (a < b ? -1 : 0);\n    }\n    a = asciifold(String(a || ''));\n    b = asciifold(String(b || ''));\n    if (a > b) return 1;\n    if (b > a) return -1;\n    return 0;\n};\n\nvar extend = function(a, b) {\n    var i, n, k, object;\n    for (i = 1, n = arguments.length; i < n; i++) {\n        object = arguments[i];\n        if (!object) continue;\n        for (k in object) {\n            if (object.hasOwnProperty(k)) {\n                a[k] = object[k];\n            }\n        }\n    }\n    return a;\n};\n\n/**\n * A property getter resolving dot-notation\n * @param  {Object}  obj     The root object to fetch property on\n * @param  {String}  name    The optionally dotted property name to fetch\n * @param  {Boolean} nesting Handle nesting or not\n * @return {Object}          The resolved property value\n */\nvar getattr = function(obj, name, nesting) {\n    if (!obj || !name) return;\n    if (!nesting) return obj[name];\n    var names = name.split(\".\");\n    // @ts-ignore\n    while(names.length && (obj = obj[names.shift()]));\n    return obj;\n};\n\nvar trim = function(str) {\n    return (str + '').replace(/^\\s+|\\s+$|/g, '');\n};\n\nvar escape_regex = function(str) {\n    return (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n};\n\nvar DIACRITICS = {\n    'a': '[aá¸€á¸Ä‚ÄƒÃ‚Ã¢ÇÇŽÈºâ±¥È¦È§áº áº¡Ã„Ã¤Ã€Ã ÃÃ¡Ä€ÄÃƒÃ£Ã…Ã¥Ä…Ä„ÃƒÄ…Ä„]',\n    'b': '[bâ¢Î²Î’Bà¸¿ðŒá›’]',\n    'c': '[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹CÌ„cÌ„Ã‡Ã§á¸ˆá¸‰È»È¼Æ‡ÆˆÉ•á´„ï¼£ï½ƒ]',\n    'd': '[dÄŽÄá¸Šá¸‹á¸á¸‘á¸Œá¸á¸’á¸“á¸Žá¸ÄÄ‘DÌ¦dÌ¦Æ‰É–ÆŠÉ—Æ‹ÆŒáµ­á¶á¶‘È¡á´…ï¼¤ï½„Ã°]',\n    'e': '[eÃ‰Ã©ÃˆÃ¨ÃŠÃªá¸˜á¸™ÄšÄ›Ä”Ä•áº¼áº½á¸šá¸›áººáº»Ä–Ä—Ã‹Ã«Ä’Ä“È¨È©Ä˜Ä™á¶’É†É‡È„È…áº¾áº¿á»€á»á»„á»…á»‚á»ƒá¸œá¸á¸–á¸—á¸”á¸•È†È‡áº¸áº¹á»†á»‡â±¸á´‡ï¼¥ï½…É˜ÇÆÆÎµ]',\n    'f': '[fÆ‘Æ’á¸žá¸Ÿ]',\n    'g': '[gÉ¢â‚²Ç¤Ç¥ÄœÄÄžÄŸÄ¢Ä£Æ“É Ä Ä¡]',\n    'h': '[hÄ¤Ä¥Ä¦Ä§á¸¨á¸©áº–áº–á¸¤á¸¥á¸¢á¸£É¦Ê°Ç¶Æ•]',\n    'i': '[iÃÃ­ÃŒÃ¬Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©Ä®Ä¯ÄªÄ«á»ˆá»‰ÈˆÈ‰ÈŠÈ‹á»Šá»‹á¸¬á¸­Æ—É¨É¨Ì†áµ»á¶–Ä°iIÄ±Éªï¼©ï½‰]',\n    'j': '[jÈ·Ä´ÄµÉˆÉ‰ÊÉŸÊ²]',\n    'k': '[kÆ˜Æ™ê€êá¸°á¸±Ç¨Ç©á¸²á¸³á¸´á¸µÎºÏ°â‚­]',\n    'l': '[lÅÅ‚Ä½Ä¾Ä»Ä¼Ä¹Äºá¸¶á¸·á¸¸á¸¹á¸¼á¸½á¸ºá¸»Ä¿Å€È½Æšâ± â±¡â±¢É«É¬á¶…É­È´ÊŸï¼¬ï½Œ]',\n    'n': '[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²È Æžáµ°á¶‡É³ÈµÉ´ï¼®ï½ŽÅŠÅ‹]',\n    'o': '[oÃ˜Ã¸Ã–Ã¶Ã“Ã³Ã’Ã²Ã”Ã´Ç‘Ç’ÅÅ‘ÅŽÅÈ®È¯á»Œá»ÆŸÉµÆ Æ¡á»Žá»ÅŒÅÃ•ÃµÇªÇ«ÈŒÈÕ•Ö…]',\n    'p': '[pá¹”á¹•á¹–á¹—â±£áµ½Æ¤Æ¥áµ±]',\n    'q': '[qê–ê—Ê ÉŠÉ‹ê˜ê™qÌƒ]',\n    'r': '[rÅ”Å•ÉŒÉÅ˜Å™Å–Å—á¹˜á¹™ÈÈ‘È’È“á¹šá¹›â±¤É½]',\n    's': '[sÅšÅ›á¹ á¹¡á¹¢á¹£êž¨êž©ÅœÅÅ Å¡ÅžÅŸÈ˜È™SÌˆsÌˆ]',\n    't': '[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­Æ®ÊˆÈšÈ›á¹°á¹±á¹®á¹¯Æ¬Æ­]',\n    'u': '[uÅ¬Å­É„Ê‰á»¤á»¥ÃœÃ¼ÃšÃºÃ™Ã¹Ã›Ã»Ç“Ç”Å°Å±Å¬Å­Æ¯Æ°á»¦á»§ÅªÅ«Å¨Å©Å²Å³È”È•âˆª]',\n    'v': '[vá¹¼á¹½á¹¾á¹¿Æ²Ê‹êžêŸâ±±Ê‹]',\n    'w': '[wáº‚áºƒáº€áºÅ´Åµáº„áº…áº†áº‡áºˆáº‰]',\n    'x': '[xáºŒáºáºŠáº‹Ï‡]',\n    'y': '[yÃÃ½á»²á»³Å¶Å·Å¸Ã¿á»¸á»¹áºŽáºá»´á»µÉŽÉÆ³Æ´]',\n    'z': '[zÅ¹Åºáºáº‘Å½Å¾Å»Å¼áº’áº“áº”áº•ÆµÆ¶]'\n};\n\nexport const asciifold = (function() {\n    var i, n, k, chunk;\n    var foreignletters = '';\n    var lookup = {};\n    for (k in DIACRITICS) {\n        if (DIACRITICS.hasOwnProperty(k)) {\n            chunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\n            foreignletters += chunk;\n            for (i = 0, n = chunk.length; i < n; i++) {\n                lookup[chunk.charAt(i)] = k;\n            }\n        }\n    }\n    var regexp = new RegExp('[' +  foreignletters + ']', 'g');\n    return function(str) {\n        return str.replace(regexp, function(foreignletter) {\n            return lookup[foreignletter];\n        }).toLowerCase();\n    };\n})();\n\n\n// export\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nexport default Sifter;\n\n","import { asciifold } from './sifter.js';\n\nlet itemHtml;\n\n/**\n *\n * @param {object} item\n * @param {boolean} renderInSelection\n * @param {string} inputValue\n * @param {function} itemRenderer\n * @param {boolean} disableHighlight\n * @returns {string}\n */\nexport function highlightSearch(item, renderInSelection, inputValue, itemRenderer, disableHighlight) {\n  const itemHtmlText = itemRenderer(item, renderInSelection, inputValue);\n\n  if (inputValue == '' || item.isSelected || disableHighlight) {\n    return itemHtmlText;\n  }\n\n  if (!itemHtml) {\n    itemHtml = document.createElement('div');\n  }\n  itemHtml.innerHTML = itemHtmlText;\n\n  const pattern = asciifold(inputValue);\n  (pattern.includes('|')\n    ? pattern.split('|').map(w => w.trim())\n    : pattern.split(' ')\n  )\n    .filter(e => e).forEach(pat => {\n      highlight(itemHtml, pat);\n    });\n\n  return itemHtml.innerHTML;\n}\n\n/**\n * highlight function code from selectize itself. We pass raw html through @html svelte tag\n * base from https://github.com/selectize/selectize.js/blob/master/src/contrib/highlight.js & edited\n *\n * @param {Node & Element & Text} node\n * @param {string} regex\n */\nfunction highlight(node, regex) {\n  let skip = 0;\n  // Wrap matching part of text node with highlighting <span>, e.g.\n  // Soccer  ->  <span class=\"highlight\">Soc</span>cer for pattern 'soc'\n  if (node.nodeType === 3) {\n    const folded = asciifold(node.data);\n    let pos = folded.indexOf(regex);\n    pos -= (folded.substr(0, pos).toUpperCase().length - folded.substr(0, pos).length);\n    if (pos >= 0 ) {\n      const spannode = document.createElement('span');\n      spannode.className = 'highlight';\n      const middlebit = node.splitText(pos);\n      const endbit = middlebit.splitText(regex.length);\n      const middleclone = middlebit.cloneNode(true);\n      spannode.appendChild(middleclone);\n      middlebit.parentNode.replaceChild(spannode, middlebit);\n      skip = 1;\n    }\n  }\n  // Recurse element node, looking for child text nodes to highlight, unless element\n  // is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n  else if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && ( node.className !== 'highlight' || node.tagName !== 'SPAN' )) {\n    for (var i = 0; i < node.childNodes.length; ++i) {\n      // @ts-ignore\n      i += highlight(node.childNodes[i], regex);\n    }\n  }\n  return skip;\n};\n\n/**\n * Detect Mac device\n *\n * @returns {boolean}\n */\nexport function iOS() {\n  return [\n    'iPad Simulator',\n    'iPhone Simulator',\n    'iPod Simulator',\n    'iPad',\n    'iPhone',\n    'iPod'\n  ].includes(navigator.platform)\n  // iPad on iOS 13 detection\n  || (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n}\n\n/**\n * Detects if on android device\n *\n * @returns {boolean}\n */\nexport function android() {\n  return navigator.userAgent.toLowerCase().includes('android');\n}\n\n/**\n * Internal formatter of newly created items\n *\n * @param {string} enteredValue\n * @returns {string}\n */\nexport function onCreate_helper(enteredValue) {\n  return (enteredValue || '').replace(/\\t/g, ' ').trim().split(' ').filter(ch => ch).join(' ');\n}\n\n/**\n * Escape HTML\n * @param {string} html\n * @returns {string}\n */\nexport function escapeHtml(html) {\n  return `${html}`\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n};\n","/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function linear(t) {\n\treturn t;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function backInOut(t) {\n\tconst s = 1.70158 * 1.525;\n\tif ((t *= 2) < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\treturn 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function backIn(t) {\n\tconst s = 1.70158;\n\treturn t * t * ((s + 1) * t - s);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function backOut(t) {\n\tconst s = 1.70158;\n\treturn --t * t * ((s + 1) * t + s) + 1;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function bounceOut(t) {\n\tconst a = 4.0 / 11.0;\n\tconst b = 8.0 / 11.0;\n\tconst c = 9.0 / 10.0;\n\tconst ca = 4356.0 / 361.0;\n\tconst cb = 35442.0 / 1805.0;\n\tconst cc = 16061.0 / 1805.0;\n\tconst t2 = t * t;\n\treturn t < a\n\t\t? 7.5625 * t2\n\t\t: t < b\n\t\t\t? 9.075 * t2 - 9.9 * t + 3.4\n\t\t\t: t < c\n\t\t\t\t? ca * t2 - cb * t + cc\n\t\t\t\t: 10.8 * t * t - 20.52 * t + 10.72;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function bounceInOut(t) {\n\treturn t < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0)) : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function bounceIn(t) {\n\treturn 1.0 - bounceOut(1.0 - t);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function circInOut(t) {\n\tif ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function circIn(t) {\n\treturn 1.0 - Math.sqrt(1.0 - t * t);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function circOut(t) {\n\treturn Math.sqrt(1 - --t * t);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function cubicInOut(t) {\n\treturn t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function cubicIn(t) {\n\treturn t * t * t;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function cubicOut(t) {\n\tconst f = t - 1.0;\n\treturn f * f * f + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function elasticInOut(t) {\n\treturn t < 0.5\n\t\t? 0.5 * Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) * Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n\t\t: 0.5 *\n\t\t\t\tMath.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n\t\t\t\tMath.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n\t\t\t\t1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function elasticIn(t) {\n\treturn Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function elasticOut(t) {\n\treturn Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function expoInOut(t) {\n\treturn t === 0.0 || t === 1.0\n\t\t? t\n\t\t: t < 0.5\n\t\t\t? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n\t\t\t: -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function expoIn(t) {\n\treturn t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function expoOut(t) {\n\treturn t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quadInOut(t) {\n\tt /= 0.5;\n\tif (t < 1) return 0.5 * t * t;\n\tt--;\n\treturn -0.5 * (t * (t - 2) - 1);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quadIn(t) {\n\treturn t * t;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quadOut(t) {\n\treturn -t * (t - 2.0);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quartInOut(t) {\n\treturn t < 0.5 ? +8.0 * Math.pow(t, 4.0) : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quartIn(t) {\n\treturn Math.pow(t, 4.0);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quartOut(t) {\n\treturn Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quintInOut(t) {\n\tif ((t *= 2) < 1) return 0.5 * t * t * t * t * t;\n\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quintIn(t) {\n\treturn t * t * t * t * t;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function quintOut(t) {\n\treturn --t * t * t * t * t + 1;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function sineInOut(t) {\n\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function sineIn(t) {\n\tconst v = Math.cos(t * Math.PI * 0.5);\n\tif (Math.abs(v) < 1e-14) return 1;\n\telse return 1 - v;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nexport function sineOut(t) {\n\treturn Math.sin((t * Math.PI) / 2);\n}\n","/** @import { FlipParams, AnimationConfig } from './public.js' */\nimport { cubicOut } from '../easing/index.js';\n\n/**\n * The flip function calculates the start and end position of an element and animates between them, translating the x and y values.\n * `flip` stands for [First, Last, Invert, Play](https://aerotwist.com/blog/flip-your-animations/).\n *\n * @param {Element} node\n * @param {{ from: DOMRect; to: DOMRect }} fromTo\n * @param {FlipParams} params\n * @returns {AnimationConfig}\n */\nexport function flip(node, { from, to }, params = {}) {\n\tvar { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;\n\n\tvar style = getComputedStyle(node);\n\n\t// find the transform origin, expressed as a pair of values between 0 and 1\n\tvar transform = style.transform === 'none' ? '' : style.transform;\n\tvar [ox, oy] = style.transformOrigin.split(' ').map(parseFloat);\n\tox /= node.clientWidth;\n\toy /= node.clientHeight;\n\n\t// calculate effect of parent transforms and zoom\n\tvar zoom = get_zoom(node); // https://drafts.csswg.org/css-viewport/#effective-zoom\n\tvar sx = node.clientWidth / to.width / zoom;\n\tvar sy = node.clientHeight / to.height / zoom;\n\n\t// find the starting position of the transform origin\n\tvar fx = from.left + from.width * ox;\n\tvar fy = from.top + from.height * oy;\n\n\t// find the ending position of the transform origin\n\tvar tx = to.left + to.width * ox;\n\tvar ty = to.top + to.height * oy;\n\n\t// find the translation at the start of the transform\n\tvar dx = (fx - tx) * sx;\n\tvar dy = (fy - ty) * sy;\n\n\t// find the relative scale at the start of the transform\n\tvar dsx = from.width / to.width;\n\tvar dsy = from.height / to.height;\n\n\treturn {\n\t\tdelay,\n\t\tduration: typeof duration === 'function' ? duration(Math.sqrt(dx * dx + dy * dy)) : duration,\n\t\teasing,\n\t\tcss: (t, u) => {\n\t\t\tvar x = u * dx;\n\t\t\tvar y = u * dy;\n\t\t\tvar sx = t + u * dsx;\n\t\t\tvar sy = t + u * dsy;\n\n\t\t\treturn `transform: ${transform} translate(${x}px, ${y}px) scale(${sx}, ${sy});`;\n\t\t}\n\t};\n}\n\n/**\n * @param {Element} element\n */\nfunction get_zoom(element) {\n\tif ('currentCSSZoom' in element) {\n\t\treturn /** @type {number} */ (element.currentCSSZoom);\n\t}\n\n\t/** @type {Element | null} */\n\tvar current = element;\n\tvar zoom = 1;\n\n\twhile (current !== null) {\n\t\tzoom *= +getComputedStyle(current).zoom;\n\t\tcurrent = /** @type {Element | null} */ (current.parentElement);\n\t}\n\n\treturn zoom;\n}\n","/**\n * @param {HTMLDivElement} element\n * @param {string} prop\n * @returns {number}\n */\nexport function pixelGetter(element, prop) {\n  const styles = window.getComputedStyle(element);\n  let { groups: { value, unit } } = styles[prop].match(/(?<value>\\d+)(?<unit>[a-zA-Z]+)/);\n  let floatValue = parseFloat((/** @type {unknown} */ value));\n  if (unit !== 'px') {\n    const el = unit === 'rem'\n      ? document.documentElement\n      : element.parentElement.parentElement;\n    const multipler = parseFloat(window.getComputedStyle(el).fontSize.match(/\\d+/).shift());\n    floatValue = multipler * floatValue;\n  }\n  return floatValue;\n}\n\n/**\n * @typedef {object} outValue\n * @property {boolean} top\n * @property {boolean} left\n * @property {boolean} bottom\n * @property {boolean} right\n * @property {boolean} any\n *\n * @param {*} elem\n * @returns {outValue}\n */\nfunction isOutOfViewport(elem) {\n  const parentBounding = elem\n    .parentElement  // dropdown container\n    .parentElement  // component container\n      .getBoundingClientRect();\n  const bounding = elem.getBoundingClientRect();\n  const out = {};\n\n  out.top = parentBounding.top < 0;\n  out.left = parentBounding.left < 0;\n  out.bottom = parentBounding.bottom + bounding.height > (window.innerHeight || document.documentElement.clientHeight)\n    && parentBounding.top > bounding.height && ((window.innerHeight || document.documentElement.clientHeight) > bounding.height + 50);\n  out.right = parentBounding.right > (window.innerWidth || document.documentElement.clientWidth);\n  out.any = out.top || out.left || out.bottom || out.right;\n\n  return out;\n};\n\n/**\n * @param {boolean} isOpened\n * @param {HTMLDivElement} scrollContainer\n * @param {boolean} renderDropdown\n * @returns {void}\n */\nexport function positionDropdown(isOpened, scrollContainer, renderDropdown) {\n  if (!scrollContainer || !renderDropdown) return;\n  const outVp = isOutOfViewport(scrollContainer);\n  if (outVp.bottom && !outVp.top) {\n    scrollContainer.parentElement.style.bottom = (scrollContainer.parentElement.parentElement.clientHeight + 1) + 'px';\n    // FUTURE: debounce ....\n  } else if (!isOpened || outVp.top || scrollContainer.parentElement.style.bottom !== '') {\n    scrollContainer.parentElement.style.bottom = '';\n  }\n}\n\n\n/**\n * @typedef {object} ScrollParams\n * @property {HTMLDivElement} container\n * @property {HTMLDivElement} scrollContainer\n * @property {boolean} virtualList\n * @property {boolean} center\n *\n * @param {ScrollParams} params\n * @param {number} dropdownIndex\n * @returns\n */\nexport function scrollIntoView({ container, scrollContainer, virtualList, center }, dropdownIndex) {\n  if (virtualList || !container) return;\n\n  /** @type {HTMLDivElement} */\n  const focusedEl = container.querySelector(`[data-pos=\"${dropdownIndex}\"]`);\n  if (!focusedEl) return;\n\n  const focusedRect = focusedEl.getBoundingClientRect();\n  const menuRect = scrollContainer.getBoundingClientRect();\n  const overScroll = focusedEl.offsetHeight / 3;\n  const centerOffset = center ? scrollContainer.offsetHeight / 2 : 0;\n  switch (true) {\n    case focusedEl.offsetTop < scrollContainer.scrollTop:\n      scrollContainer.scrollTop = focusedEl.offsetTop - overScroll + centerOffset;\n      break;\n    case focusedEl.offsetTop + focusedRect.height > scrollContainer.scrollTop + menuRect.height:\n        scrollContainer.scrollTop = focusedEl.offsetTop + focusedRect.height - scrollContainer.offsetHeight + overScroll + centerOffset;\n      break;\n  }\n}\n","import Sifter from './sifter.js';\n\n/**\n * @typedef {object} ComponentConfig\n * @property {boolean} optionsWithGroups\n * @property {string} valueField\n * @property {string} labelField\n * @property {string} optLabel\n * @property {string} optItems\n * @property {string[]} optionProps\n */\n\n/**\n * @typedef {object} SortDef\n * @property {string} field\n * @property {'asc'|'desc'} [direction]\n *\n * @typedef {object} SearchProps\n * @property {string|string[]} [fields]\n * @property {string|SortDef[]} [sort]\n * @property {boolean} [keepSelectionInList]\n * @property {boolean} [nesting]\n * @property {'or'} [conjunction]\n * @property {boolean} [skipSort]\n * @property {boolean} [startOnly]\n * @property {boolean} [wordsOnly]\n * @property {boolean} [disabled]\n */\n\n/**\n * @param {string} valueField\n * @param {string} labelField\n * @param {string} optLabel\n * @param {string} optItems\n * @returns {ComponentConfig}\n */\nexport function createConfig(valueField, labelField, optLabel, optItems) {\n  return {\n    optionProps: [],\n    optionsWithGroups: false,\n    valueField,\n    labelField,\n    optLabel,\n    optItems\n  }\n}\n\n/**\n * @param {array} options\n * @param {array|null|object} initialValue\n * @param {boolean} valueAsObject\n * @param {string} valueField\n */\nexport function initSelection(options, initialValue, valueAsObject, valueField) {\n  let initialValue_array = Array.isArray(initialValue)\n    ? initialValue\n    : [initialValue];\n\n  if (valueAsObject) {\n    initialValue_array = initialValue_array.map(opt => opt[valueField]);\n  }\n\n  /** @type {object[]} */\n  const initialSelection = options.reduce((res, opt) => {\n    if (initialValue_array.includes(opt[valueField])) {\n      opt.$selected = true;\n      res.push(opt);\n    }\n    return res;\n  }, []);\n\n  return initialSelection\n    .sort((a, b) => initialValue_array.indexOf(a[valueField]) < initialValue_array.indexOf(b[valueField]) ? -1 : 1)\n}\n\n/**\n *\n * @param {object[]|string[]} options\n * @param {string?} valueField\n * @param {string?} labelField\n * @returns {object[]}\n */\nexport function ensureObjectArray(options, valueField, labelField) {\n  return typeof options[0] === 'object'\n    ? JSON.parse(JSON.stringify(options))\n    : options.map(arrayValue => ({\n      [valueField || 'value']: arrayValue,\n      [labelField || 'text']: arrayValue\n    }));\n}\n\n/**\n *\n * @param {object[]} options\n * @param {ComponentConfig} config\n * @returns\n */\nexport function flatList(options, config) {\n  const flatOpts = options.reduce((res, opt, i) => {\n    if (opt[config.optItems]) {\n      if (opt[config.optItems].length === 0) return res;\n      config.optionsWithGroups = true;\n      res.push({ label: opt[config.optLabel], $isGroupHeader: true });\n      res.push(...opt[config.optItems].map(_opt => {\n        _opt.$isGroupItem = true;\n        return _opt;\n      }));\n      return res;\n    }\n    res.push(opt);\n    return res;\n  }, []);\n  updateOptionProps(flatOpts, config);\n  return flatOpts;\n}\n\n/**\n * @param {object[]} options\n * @param {ComponentConfig} config\n */\nfunction updateOptionProps(options, config) {\n  options.some(opt => {\n    if (opt.$isGroupHeader) return false;\n    config.optionProps = getFilterProps(opt);\n    return true;\n  })\n}\n\n/**\n *\n * @param {object} object\n * @returns {string[]}\n */\nexport function getFilterProps(object) {\n  const exclude = ['$disabled', '$isGroupHeader', '$isGroupItem', '$created', '$selected'];\n  return Object.keys(object).filter(prop => !exclude.includes(prop));\n}\n\n/**\n *\n * @param {object[]} options\n * @param {?string} inputValue\n * @param {?Set} excludeSelected\n * @param {ComponentConfig} config\n * @param {SearchProps} searchProps\n * @returns {object[]}\n */\nexport function filterList(options, inputValue, excludeSelected, config, searchProps = {}) {\n  if (!searchProps.keepSelectionInList && excludeSelected) {\n    options = options\n      .filter(opt => !excludeSelected.has(opt[config.valueField]))\n      .filter((opt, idx, self) => {\n        if (opt.$isGroupHeader &&\n          (\n            (self[idx + 1] && self[idx + 1].$isGroupHeader)\n          || self.length <= 1\n          || self.length - 1 === idx\n          )\n        ) return false;\n        return true;\n      })\n  }\n  if (searchProps.disabled || !inputValue) return options;\n\n  const sifter = new Sifter(options);\n  /**\n   * Sifter is used for searching to provide rich filter functionality.\n   * But it degradate nicely, when optgroups are present\n  */\n  if (config.optionsWithGroups || searchProps.skipSort) {  // disable sorting\n    sifter.getSortFunction = () => null;\n  }\n  let conjunction = 'and';\n  if (inputValue.includes('|')) {\n    conjunction = 'or';\n    inputValue = inputValue.split('|').map(word => word.trim()).join(' ');\n  }\n\n  const result = sifter.search(inputValue, {\n    fields: searchProps.fields || config.optionProps,\n    sort: searchProps.sort || createSifterSortField(config.labelField),\n    conjunction: searchProps.conjunction || conjunction,\n    nesting: searchProps.nesting || false,\n    wordsOnly: searchProps.wordsOnly || false,\n    startOnly: searchProps.startOnly || false\n  });\n\n  const mapped = config.optionsWithGroups\n    ? result.items.reduce((res, item) => {\n        const opt = options[item.id];\n        if (excludeSelected && opt.isSelected) return res;\n        const lastPos = res.push(opt);\n        if (opt.$isGroupItem) {\n          const prevItems = options.slice(0, item.id);\n          let prev = null;\n          do {\n            prev = prevItems.pop();\n            prev && prev.$isGroupHeader && !res.includes(prev) && res.splice(lastPos - 1, 0, prev);\n          } while (prev && !prev.$isGroupHeader);\n        }\n        return res;\n      }, [])\n    : result.items.map(item => options[item.id])\n  return mapped;\n}\n\nfunction createSifterSortField(prop) {\n  return [{ field: prop, direction: 'asc'}];\n}\n\n/**\n * Automatic setter for 'valueField' or 'labelField' when they are not set\n *\n * @param {string} type\n * @param {array} options\n * @param {string?} groupItemsField\n */\nexport function fieldInit(type, options, groupItemsField) {\n  const isValue = type === 'value';\n  let val = isValue  ? 'value' : 'text';              // selectize style defaults\n  if (options && options.length) {\n    // @ts-ignore\n    const firstItem = options[0][groupItemsField] ? options[0][groupItemsField][0] : options[0];\n    if (!firstItem || typeof firstItem === 'string') return val;\n    const autoAddItem = isValue ? 0 : 1;\n    const guessList = isValue\n      ? ['id', 'value', 'ID']\n      : ['name', 'title', 'label'];\n    // @ts-ignore\n    val = Object.keys(firstItem).filter(prop => guessList.includes(prop))\n      .concat([Object.keys(firstItem)[autoAddItem]])  // auto add field (used as fallback) if empty list is returned\n      .shift();\n  }\n  return val;\n}\n","/**\n * @typedef {object} ExtButton\n * @property {object?} [bound_item]\n *\n * @param {HTMLElement & ExtButton} node\n * @param {object} selectedObject\n */\nexport function bindItem(node, selectedObject) {\n  node.bound_item = selectedObject;\n\n  return {\n    destroy: () => {}\n  }\n}\n","<script>\n  import { onDestroy, onMount, tick } from \"svelte\";\n\n  /**\n   * @typedef {{\n   *  itemCount: Array<Object>,\n   *  maxHeight: number,\n   *  itemHeight?: number,\n   *  scrollToIndex: number,\n   *  children: import('svelte').Snippet<[ index: number ]>\n   * }} */\n  const {\n    itemCount,\n    maxHeight,\n    itemHeight = null,  // null means, automatic handling\n    scrollToIndex,\n    children,\n  } = $props();\n\n  export function resolveItemSize() {\n    /** @ts-ignore @type {HTMLElement}  */\n    const el = ref_contents.firstElementChild;\n\n    return el?.offsetHeight || 0;\n  }\n\n  let prev_itemCount = itemCount;\n  let prev_scrollToIndex = scrollToIndex;\n  let currentOffset = 0;\n\n  let start = $state(0);\n  let end = $state(0);\n  let top = $state(0);\n  let viewport_height = $state(0);\n  /** @type {HTMLElement} */\n  let ref_viewport  = $state(null);\n  /** @type {HTMLElement} */\n  let ref_contents = $state(null);\n  /** @type {number} */\n  let itemSize = $state(itemHeight);\n\n  let style = $derived(`height:${viewport_height}px;width:100%`);\n  let visibleItems = $derived.by(() => {\n    const items = [];\n    for (let i = start; i< end; i++) {\n      items.push({ index: i });\n    }\n    return items;\n  });\n\n  function updateScrollIndex(index) {\n    prev_scrollToIndex = index;\n    if (index < 0 || index > itemCount) {\n      index = 0;\n    }\n    if (start < index && index < end -1) {\n      return;\n    }\n\n    const maxOffset = index * itemSize;\n    const minOffset = maxOffset - ref_viewport.clientHeight + itemSize;\n    const totalSize = itemCount * itemSize;\n\n    const idealOffset = Math.max(minOffset, Math.min(maxOffset, currentOffset));\n\n    currentOffset = Math.max(0, Math.min(totalSize - ref_viewport.clientHeight, idealOffset));\n    ref_viewport.scroll({\n      top: currentOffset,\n      behavior: 'auto'\n    });\n  }\n\n  /**\n   *\n   * @param {number} itemsCount\n   */\n  async function refresh(itemsCount) {\n    // first init\n    if (!itemSize && itemsCount && end === 0) {\n      end = 1;\n      await tick();\n      itemSize = resolveItemSize();\n    }\n\n    prev_itemCount = itemsCount;\n\n    viewport_height = Math.min(maxHeight, itemsCount * itemSize);\n    end = Math.min(itemsCount, Math.round(maxHeight / itemSize));\n\n    await tick();\n    handle_scroll();  // just make sure to repaint visible area\n  }\n\n  async function handle_scroll() {\n    const { scrollTop } = ref_viewport;\n\n    const old_start = start;\n\n    let i = 0;\n    let y = 0;\n\n    while (i < itemCount) {\n      if (y + itemSize > scrollTop) {\n        start = i;\n        top = y;\n        break;\n      }\n\n      y += itemSize;\n      i += 1;\n    }\n\n    while (i < itemCount) {\n      y += itemSize;\n      i += 1;\n\n      if (y > scrollTop + viewport_height) break;\n    }\n\n    end = i;\n\n    if (start < old_start) {\n      // await tick();\n\n      let expected_height = 0;\n      let actual_height = 0;\n\n      for (let i = start; i < old_start; i += 1) {\n        const idx = i - start;\n        if (start <= idx && idx < end) {\n          expected_height += itemSize;\n          actual_height += itemSize;\n        }\n      }\n\n      const d = actual_height - expected_height;\n      ref_viewport.scrollTo(0, scrollTop + d);\n    }\n  }\n\n  onMount(() => {\n    refresh(itemCount);\n    ref_viewport?.addEventListener('scroll', handle_scroll, { passive: true });\n  });\n\n  onDestroy(() => {\n    ref_viewport?.removeEventListener('scroll', handle_scroll);\n  });\n\n  $effect(() => {\n    prev_itemCount !== itemCount && refresh(itemCount);\n  });\n\n  $effect(() => {\n    prev_scrollToIndex !== scrollToIndex && updateScrollIndex(scrollToIndex);\n  });\n</script>\n\n<svelecte-list-viewport\n  bind:this={ref_viewport}\n  {style}\n>\n  <svelecte-list-content\n    bind:this={ref_contents}\n    style=\"padding-top: {top}px; height: {itemCount * itemSize}px;\"\n  >\n    {#each visibleItems as row (row.index)}\n      <svelecte-list-row>\n        {@render children?.(row.index)}\n      </svelecte-list-row>\n    {/each}\n  </svelecte-list-content>\n</svelecte-list-viewport>\n\n<style>\n  svelecte-list-viewport {\n    position: relative;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n    display: block;\n  }\n\n  svelecte-list-content,\n  svelecte-list-row {\n    display: block;\n  }\n\n  svelecte-list-row {\n    /* NOTE: ðŸ¤” needed? */\n    overflow: hidden;\n  }\n</style>\n","<script module>\n  import defaults from './settings.js';\n\n  import { requestFactory, debounce } from './utils/fetch.js';\n  import { onCreate_helper, escapeHtml } from './utils/helpers.js';\n\n  defaults.requestFactory = requestFactory;\n\n  const stringFormatters = {\n    default: function(item) { return escapeHtml(item[this.label]); },\n    html: function(item) { return item[this.label]; }\n  };\n\n  const _noop = _node => ({ destroy: () => {}});\n\n  /**\n   * Provide ability to add additional renderers in raw html string format\n   *\n   * @param {string|Record<string, (item: object, selectionSection?: boolean, inputValue?: string) => string>} name\n   * @param {(item: object, selectionSection?: boolean, inputValue?: string) => string} rendererFn\n   */\n  export function addRenderer(name, rendererFn) {\n    if (name instanceof Object) {\n      for (let prop in name) {\n        stringFormatters[prop] = name[prop];\n      }\n    } else {\n      stringFormatters[name] = rendererFn\n    }\n  };\n\n  export const config = defaults;\n</script>\n\n<!-- svelte-ignore state_referenced_locally -->\n<script>\n  import { onMount, tick } from 'svelte';\n  import { flip } from 'svelte/animate';\n  import { pixelGetter, positionDropdown, scrollIntoView } from './utils/dropdown.js';\n  import { createConfig, ensureObjectArray, filterList, flatList, fieldInit, initSelection } from './utils/list.js';\n  import { highlightSearch, android } from './utils/helpers.js';\n  import { bindItem } from './utils/actions.js';\n  import VirtualList from './VirtualList.svelte';\n\n  /**\n   * @type {{\n   *  name?: string;\n   *  inputId?: string;\n   *  required?: boolean;\n   *  disabled?: boolean;\n   *  options?: Array<any> | object;\n   *  optionResolver?: (options: any, selectedKeys: Set) => object[];\n   *  valueField?: string | null;\n   *  labelField?: string | null;\n   *  groupLabelField?: string;\n   *  groupItemsField?: string;\n   *  disabledField?: string;\n   *  placeholder?: string;\n   *  searchable?: boolean;\n   *  clearable?: boolean;\n   *  renderer?: ( (item: object, selectionSection?: boolean, inputValue?: string) => string ) | string;\n   *  disableHighlight?: boolean;\n   *  highlightFirstItem?: boolean;\n   *  selectOnTab?: boolean | \"select-navigate\";\n   *  resetOnBlur?: boolean;\n   *  resetOnSelect?: boolean;\n   *  closeAfterSelect?: string | boolean;\n   *  deselectMode?: \"native\" | \"toggle\" | \"none\";\n   *  dndzone?: Function;\n   *  strictMode?: boolean;\n   *  multiple?: boolean;\n   *  max?: number;\n   *  collapseSelection?: \"blur\" | \"always\" | null;\n   *  keepSelectionInList?: boolean | \"auto\";\n   *  creatable?: boolean;\n   *  creatablePrefix?: string;\n   *  allowEditing?: boolean;\n   *  keepCreated?: boolean;\n   *  delimiter?: string;\n   *  createFilter?: (inputValue: string) => boolean;\n   *  createHandler?: (prop: { inputValue: string, valueField: string, labelField: string, prefix: string }) => (Promise<object> | object);\n   *  fetch?: string | null;\n   *  fetchProps?: object | Function;\n   *  fetchMode?: \"auto\" | \"init\";\n   *  fetchCallback?: Function;\n   *  fetchResetOnBlur?: boolean;\n   *  fetchDebounceTime?: number;\n   *  minQuery?: number;\n   *  lazyDropdown?: boolean;\n   *  virtualList?: boolean;\n   *  vlItemSize?: number;\n   *  searchProps?: import(\"./utils/list.js\").SearchProps | null;\n   *  class?: string | array | object;\n   *  i18n?: object;\n   *  value?: any[] | string | number | object | null;\n   *  readSelection?: object | object[] | null;\n   *  valueAsObject?: boolean;\n   *  parentValue?: string | number | null | undefined;\n   *  emitValues?: boolean;\n   *  onChange?: Function;\n   *  onFocus?: Function;\n   *  onBlur?: Function;\n   *  onCreateOption?: Function;\n   *  onCreateFail?: Function;\n   *  onEnterKey?: Function;\n   *  onFetch?: Function;\n   *  onFetchError?: Function;\n   *  onInvalidValue?: Function;\n   *  prepend?: import(\"svelte\").Snippet | undefined;\n   *  collapsedSelection?: import(\"svelte\").Snippet<[selectedOptions: object[], i18n: import(\"./settings.js\").I18nObject]>;\n   *  selection?: import(\"svelte\").Snippet<[selectedOptions: object[], bindItem: Function]>;\n   *  clearIcon?: import(\"svelte\").Snippet<[selectedOptions: object[], input_value: string]>;\n   *  toggleIcon?: import(\"svelte\").Snippet<[dropdownShow: boolean]>;\n   *  append?: import(\"svelte\").Snippet | undefined;\n   *  listHeader?: import(\"svelte\").Snippet | undefined;\n   *  option?: import(\"svelte\").Snippet<[option: object, inputValue: string]>;\n   *  createRow?: import(\"svelte\").Snippet<[isCreating: boolean, inputValue: string, i18n: import(\"./settings.js\").I18nObject]>;\n   *  positionResolver?: Function;\n   *  anchor_element?: string | null;\n   *  controlClass?: string | null;\n   *  dropdownClass?: string | null;\n   *  optionClass?: string | null;\n   * }}\n   */\n  let {\n    name = '',\n    inputId = '',\n    required = false,\n    disabled = false,\n    options = [],\n    optionResolver,\n    valueField = defaults.valueField,\n    labelField = defaults.labelField,\n    groupLabelField = defaults.groupLabelField,\n    groupItemsField = defaults.groupItemsField,\n    disabledField = defaults.disabledField,\n    placeholder = defaults.placeholder,\n    searchable = defaults.searchable,\n    clearable = defaults.clearable,\n    renderer,\n    disableHighlight = false,\n    highlightFirstItem = defaults.highlightFirstItem,\n    selectOnTab = defaults.selectOnTab,\n    resetOnBlur = defaults.resetOnBlur,\n    resetOnSelect = defaults.resetOnSelect,\n    closeAfterSelect = defaults.closeAfterSelect,\n    deselectMode = defaults.deselectMode,\n    dndzone = _noop,\n    strictMode = true,\n    multiple = defaults.multiple,\n    max = defaults.max,\n    collapseSelection = defaults.collapseSelection,\n    keepSelectionInList = defaults.keepSelectionInList,\n    creatable = defaults.creatable,\n    creatablePrefix = defaults.creatablePrefix,\n    allowEditing = defaults.allowEditing,\n    keepCreated = defaults.keepCreated,\n    delimiter = defaults.delimiter,\n    createFilter,\n    createHandler,\n    fetch = null,\n    fetchProps = defaults.fetchProps,\n    fetchMode = 'auto',\n    fetchCallback = defaults.fetchCallback,\n    fetchResetOnBlur = true,\n    fetchDebounceTime = defaults.fetchDebounceTime,\n    minQuery = defaults.minQuery,\n    lazyDropdown = defaults.lazyDropdown,\n    virtualList = defaults.virtualList,\n    vlItemSize = defaults.vlItemSize,\n    searchProps = null,\n    class: className = 'svelecte-control',\n    i18n = null,\n    value = $bindable(),\n    readSelection = $bindable(),  // never used, updated from component to the parent\n    emitValues = false,\n    valueAsObject = defaults.valueAsObject,\n    parentValue = undefined,\n    onChange = _readSelection => {},\n    onFocus = _htmlInput => {},\n    onBlur = _htmlInput => {},\n    onCreateOption = _newObj => {},\n    onCreateFail = _fail => {},\n    onEnterKey = _event => {},\n    onFetch = _data => {},\n    onFetchError = _err => {},\n    onInvalidValue = _val => {},\n    prepend = undefined,\n    collapsedSelection = snippet_collapsedSelection,\n    selection = snippet_selection,\n    clearIcon = snippet_clearIcon,\n    toggleIcon = snippet_toggleIcon,\n    append = undefined,\n    listHeader = undefined,\n    option = snippet_option,\n    createRow = snippet_createRow,\n    positionResolver = _noop,\n    anchor_element = undefined,\n    controlClass = undefined,\n    dropdownClass = undefined,\n    optionClass = undefined\n  } = $props();\n\n  export function focus() {\n    ref_input.focus();\n  }\n  // required for custom element\n  export function setSelection(selection, triggerChangeEvent) {\n    watch_value_change(selection);\n    triggerChangeEvent && emitChangeEvent();\n  }\n  // required for custom element\n  export function getSelection(onlyValues) {\n    return compute_selection(!onlyValues);\n  }\n  /**\n   * Add ability to re-initialize fetch even when component is in query mode\n   * @param {string|number|array} value\n   */\n  export function refetchWith(value) {\n    if (!fetch) return;\n    fetch_runner({\n      init: true,\n      initValue: value,\n      storedValue: fetchResetOnBlur\n    });\n    fetchResetOnBlur = false; // force this to preven 'clearSelection' clear fetched options\n  }\n\n  const DOM_ID = name ? `sv-${name}-select-${`${Math.random()}`.substring(2, 6)}` : null;\n\n  if (required && !name) console.warn(`[Svelecte]: 'required' prop has no effect when 'name' prop is NOT set`)\n\n  /** ************************************ preparation */\n  /* possibility to provide initial (selected) values in `fetch` mode (only !strictMode) **/\n  if (fetch && value && valueAsObject && !strictMode && (!options || (options && options.length === 0))) {\n    options = Array.isArray(value) ? value : [value];\n  }\n  if (!inputId) inputId = DOM_ID ? DOM_ID.replace('-select-', '-input-') : `svelecte-input-${`${Math.random()}`.substring(2, 12)}`;\n  /** ************************************ END preparation */\n\n  let is_mounted = $state(false);\n  // state-related\n  let options_stopgap = options;\n  let prev_value;\n  let prev_parent_value = undefined;\n  let init_only_options = optionResolver\n    ? optionResolver(options, new Set())\n    : ensureObjectArray(options, valueField, labelField)\n  let currentValueField = $state(valueField || fieldInit('value', init_only_options, groupItemsField));\n  let currentLabelField = $state(labelField || fieldInit('label', init_only_options, groupItemsField));\n  const itemConfig = createConfig(currentValueField, currentLabelField, groupLabelField, groupItemsField);\n\n  let prev_options = $state(flatList(init_only_options, itemConfig));\n  let options_flat_override = $state(false);\n  let options_flat = $derived(options_flat_override ? [] : prev_options);\n  // @ts-ignore\n  init_only_options = undefined; // cleanup\n\n\n  /** @reactive @type {object[]} */\n  let selectedOptions = $state(\n    value\n      ? initSelection(options_flat, value, valueAsObject, currentValueField)\n      : []\n  );\n  /** @type {Set<string|number>} */\n  const selectedKeys = selectedOptions.reduce((/** @type {Set} */ set,/** @type {object} */ opt) => {\n    set.add(opt[currentValueField]);\n    return set;\n  }, new Set());\n  let alreadyCreated = selectedOptions.filter(opt => opt.$created);\n  // logic-related\n  let is_focused = $state(false);\n  let focus_by_mouse = $state(false);\n  let is_tainted = $state(false); // true after first focus\n  let is_dropdown_opened = $state(false);\n  let dropdown_show = $state(false);\n  let dropdown_index = $state(highlightFirstItem ? 0 : -1);\n  // dropdown-related\n  let render_dropdown = $state(!lazyDropdown);\n  let dropdown_scroller = null;\n  let meta_key = $state();\n  let hasEmptyList = false;\n  // input-related\n  /** @type {string} */\n  let input_value = $state('');\n  let disable_key_event_bubble = false;\n  // utils\n  /** @type {import('./settings.js').I18nObject} */\n  let i18n_actual = $derived(Object.assign({}, config.i18n, i18n || {}));\n  let fetch_initOnly = $derived(fetchMode === 'init' || (fetch && fetch.includes('[query]') === false));\n  let fetch_initValue = (fetch && (value || (multiple && value && value.length)))\n    ? (valueAsObject\n      ? (strictMode === false\n        ? $state.snapshot(value)\n        : null\n      )\n      : JSON.parse(JSON.stringify(value))\n    )\n    : null;\n  let isIOS = null;\n  let doCollapse = $state(collapseSelection !== null);\n  let isFetchingData = $state(false);\n  let isCreating = $state(false);\n  let flipDurationMs = $state(100);\n  let is_dragging = false;\n  let is_fetch_dependent = false;\n  // refs\n  let /** @type {HTMLInputElement}  */  ref_input;\n  // svelte-ignore non_reactive_update\n  let /** @type {HTMLSelectElement} */  ref_select_element;\n  // svelte-ignore non_reactive_update\n  let /** @type {HTMLDivElement}    */  ref_container;\n  // @ts-ignore\n  let /** @type {HTMLDivElement}    */  ref_container_scroll = $state(null);\n  // svelte-ignore non_reactive_update\n  let /** svelte-tiny-virtual-list  */  ref_virtuallist;\n\n  // #region [reactivity]\n  $effect(() => {\n    watch_item_props(valueField, labelField)\n  });\n  let maxReached = $derived.by(() => {\n    return max !== 0 && selectedOptions.length == max;     // == is intentional, if string is provided\n  });\n  $effect(() => {\n    watch_options(options);\n  });\n  $effect(() => {\n    value !== undefined && watch_value_change(value);\n  });\n  let options_filtered_override = null;\n  let options_filtered = $derived.by(() => {\n    selectedOptions.length;\n    options_flat.length;\n\n    if (!input_value && fetch && !fetch_initOnly && fetchResetOnBlur) return [];\n    if (options_filtered_override) return options_filtered_override;  // related to fetch\n\n    return maxReached\n      ? []\n      : filterList(\n        options_flat,\n        input_value,\n        resolveExcludedValue(input_value),\n        itemConfig,\n        searchProps || {}\n      )\n  });\n  $effect(() => {\n    let list_length = options_filtered.length;\n    if (creatable && input_value) list_length++;  // needed for NOT reseting dropdown_index with create_row displayed\n\n    list_length <= dropdown_index && setDropdownIndex(0, { asc: !creatable, desc: creatable });\n    watch_listMessage(maxReached, options_filtered);\n  });\n  // only initial setter\n  if (highlightFirstItem) setDropdownIndex(0, { asc: true });\n\n  let createFilterFn = $derived(createFilter || (inputVal => alreadyCreated.includes(inputVal)));\n  let createHandlerFn = $derived(createHandler || (({ inputValue, labelField, valueField, prefix }) => ({\n    [valueField]: inputValue,\n    [labelField]: `${prefix}${inputValue}`\n  })));\n\n  /**\n   * @type {function}\n   */\n   let itemRenderer = $derived.by(() => typeof renderer === 'function'\n    ? renderer\n    : ((stringFormatters[renderer]\n      ? stringFormatters[renderer]\n      : stringFormatters['default']\n    ).bind({ label: currentLabelField}))\n  );\n\n  /** ************************************ input-specific */\n\n  /** @type {'text'|'none'}*/\n  let input_mode = $derived(searchable ? 'text' : 'none');\n  /** @type {string} */\n  let placeholder_active = $derived(selectedOptions.length ? '' : placeholder);\n  /** @type {'enter'|null} */\n  let enter_hint = $derived(selectedOptions.length > 0 && multiple === false ? null : 'enter');\n  // aria related\n  let aria_selection = $derived(i18n_actual.aria_selected(selectedOptions.map(o => o[currentLabelField])));\n  let aria_context = $derived.by(() => {\n    if (selectedOptions.length && selectedOptions.length === max) return i18n_actual.max(max);\n\n    const idx = Math.min(dropdown_index, options_filtered.length-1);  // can happen, because derived run before effects\n    if (fetch) {\n      return isFetchingData\n        ? i18n_actual.fetchInit\n        : (options_filtered.length\n          ? (dropdown_index !== -1\n            ? i18n_actual.aria_inputFocused()\n            : (options_filtered[dropdown_index]\n              ? i18n_actual.aria_listActive(options_filtered[idx], currentLabelField, options_filtered.filter(o => !o.$isGroupHeader).length)\n              : 'N/A.' + dropdown_index\n            )\n          )\n          : (minQuery > 1\n            ? i18n_actual.fetchQuery(minQuery, input_value.length)\n            : i18n_actual.fetchBefore\n          )\n        )\n      ;\n    }\n    return options_filtered.length\n      ? (is_dropdown_opened && dropdown_index !== -1 && !isNaN(dropdown_index)\n        ? i18n_actual.aria_listActive(options_filtered[idx], currentLabelField, options_filtered.filter(o => !o.$isGroupHeader).length)\n        : i18n_actual.aria_inputFocused()\n      )\n    : (input_value.length\n      ? i18n_actual.nomatch\n      : i18n_actual.empty\n    );\n  });\n\n  // #endregion\n\n  // #region [watchers]\n\n  /**\n   * Set current*Field reiliably when props change\n   *\n   * @param {string?} valueProp\n   * @param {string?} labelProp\n   */\n  function watch_item_props(valueProp, labelProp) {\n    if (!is_mounted) return;\n\n    if (valueProp && currentValueField !== valueProp) {\n      itemConfig.valueField = currentValueField = valueProp;\n      // check note in watch_options()\n      selectedKeys.size > 0 && clearSelection();\n    }\n    if (labelProp) {\n      itemConfig.labelField = currentLabelField = labelProp;\n    }\n  }\n\n\n  /**\n   * @param {array} opts\n   */\n  function watch_options(opts) {\n    if (options_stopgap === opts) return;\n    // make sure, it's an array\n    opts = flatList(  // although valid data is passed, `flatList` must be run, to update optionProps\n      ensureObjectArray(opts, currentValueField, currentLabelField), itemConfig\n    );\n\n    // do these automatic re-adjustments only when props are not specified\n    if (!valueField) {\n      const ivalue = fieldInit('value', opts || null, groupItemsField);\n      if (!valueField && currentValueField !== ivalue) {\n        itemConfig.valueField = currentValueField = ivalue;\n        /**\n         * NOTE: selection is RESET when non-matching is detected (selection would be messed up anyway)\n         */\n        selectedKeys.size > 0 && clearSelection();\n      }\n    }\n    if (!labelField) {\n      const ilabel = fieldInit('label', opts || null, groupItemsField);\n      if (!labelField && currentLabelField !== ilabel) {\n        itemConfig.labelField = ilabel;\n        currentLabelField = ilabel;\n      };\n    }\n    options_stopgap = opts;\n    // continue to update options_flat\n    prev_options = optionResolver\n      ? optionResolver(opts, selectedKeys)\n      : opts;\n  }\n\n  function equals(prevValue, passedVal) {\n    if (multiple) {\n      if (prevValue && passedVal?.length === prevValue.length && prevValue.length > 0) {\n        return valueAsObject\n          ? prevValue.every((o, i) => o[currentValueField] === passedVal[i][currentValueField])\n          : prevValue.every((o, i) => o === passedVal[i]);\n      }\n    } else {\n      if (passedVal && prevValue) {\n        return valueAsObject\n          ? passedVal[currentValueField] === prevValue[currentValueField]\n          : passedVal === prevValue;\n      }\n    }\n    return false;\n  }\n\n\n  /**\n   * @typedef {object} ValueWatcherOptions\n   * @property {boolean} [skipEqualityCheck]\n   *\n   * @param {any} passedVal\n   * @param {ValueWatcherOptions} [opts]\n   */\n  function watch_value_change(passedVal, opts) {\n    if (equals(prev_value, passedVal) && !opts?.skipEqualityCheck) return;\n    // NOTE: I am commenting all `optionResolver` if-s\n    // if (optionResolver) return;\n\n    const ifArrayThenNonEmpty = (Array.isArray(passedVal) && passedVal.length) || multiple === false; // return true for allowing '' or 0\n    if (passedVal !== null && ifArrayThenNonEmpty) {\n      if ((multiple && !Array.isArray(passedVal)) || (!multiple && Array.isArray(passedVal))) {\n        console.warn(`[Svelecte]: Passed 'value' property should ${ multiple ? 'be' : 'NOT be'} an array`);\n      }\n      // wait for fetch to be resolved\n      if (fetch_initValue && (Array.isArray(fetch_initValue) ? fetch_initValue.length : true)) return;\n\n      const arrValue = Array.isArray(passedVal) ? passedVal : [passedVal];\n      const newSelectedKeys = [];\n      const _selection = arrValue.reduce((res, val) => {\n        // skip options scan when in valueAsObject non-strict mode\n        if (valueAsObject && (!strictMode || (creatable && val.$created))) {\n          res.push(Object.fromEntries(Object.entries(val)));\n          return res;\n        }\n        let opt = options_flat.find(item => valueAsObject\n          ? item[currentValueField] == val[currentValueField]\n          : item[currentValueField] == val\n        );\n        if (!opt && !strictMode) {\n          // only sync (or default) handler is allowed for code simplicty\n          opt =  createHandler\n            ? createHandlerFn({\n              inputValue: val,\n              valueField: currentValueField,\n              labelField: currentLabelField,\n              prefix: creatablePrefix\n            })\n            : {\n              [currentValueField]: val,\n              [currentLabelField]: val\n            };\n        }\n        if (opt) {\n          if (!selectedKeys.has(opt[currentValueField])) {\n            res.push(opt);\n          }\n          newSelectedKeys.push(opt[currentValueField]);\n        }\n        return res;\n      }, []);\n      // de-select those, that cannot be selected anymore\n      // if (!optionResolver) {\n        selectedOptions.forEach(opt => !newSelectedKeys.includes(opt[currentValueField]) && deselectOption(opt));\n      // }\n\n      // let success = arrValue.filter(o => o.$created !== true).length !== _selection.filter(o => o.$created !== false);\n      let success = _selection.every(selectOption) && (multiple\n        ? selectedKeys.size === arrValue.length\n        : selectedKeys.size === 1\n      );\n\n      // this is run only when invalid 'value' is provided, like out of option array\n      if (!success) {\n        console.warn('[Svelecte]: provided \"value\" property is invalid', passedVal);\n        if (valueAsObject && strictMode && fetch) {\n          console.warn(`[Svelecte]: with 'fetch' and 'valueAsObject' set make sure 'strictMode' is set to false to be to set initial value`);\n        }\n        clearSelection();\n        prev_value = multiple ? [] : null;\n        value = prev_value;\n        readSelection = prev_value;\n        onInvalidValue(passedVal);\n        return;\n      }\n    } else {\n      clearSelection();\n    }\n    prev_value = $state.snapshot(passedVal);\n    if (multiple && !Array.isArray(passedVal)) {\n      prev_value = [];\n      value = prev_value;\n    }\n    readSelection = compute_selection(true);\n  }\n\n  /**\n   * Compute selection value\n   * @returns {array|object|string|number|null}\n   */\n  function compute_selection(asObjects) {\n    const asValues = asObjects !== true;\n    // if (is_dragging) return;\n    const selection_formatted = selectedOptions\n      .map(opt => {\n        if (asValues) return opt[currentValueField];\n        const obj = {};\n        for (let [prop, val] of Object.entries(opt)) {\n          if (prop[0] !== '$') obj[prop] = val;\n        }\n        return obj;\n      });\n\n    return multiple\n      ? selection_formatted\n      : (selection_formatted.length\n        ? selection_formatted.shift()\n        : null\n      );\n  }\n\n  $effect(() => {   // previously $: watch_parentValue()\n    // check for undefined is required because parent have empty value as well and I want to avoid 2 props just for this\n    if ((parentValue !== undefined && prev_parent_value !== parentValue)\n      || (parentValue === undefined && prev_parent_value !== parentValue)\n    ) {\n      const disabled_to_set = parentValue === undefined\n        ? false\n        : (!parentValue\n          ? true\n          : false\n        )\n      clearSelection();\n      value = multiple ? [] : null;\n      disabled = disabled_to_set;\n    }\n    prev_parent_value = parentValue;\n    is_fetch_dependent = parentValue !== undefined;\n  });\n\n  function updateDropdownState(val) {\n    if (val && !focus_by_mouse) focus_by_mouse = true;\n    const alreadyRendered = render_dropdown;\n    if (!render_dropdown && val) render_dropdown = true;\n\n    is_dropdown_opened = val;\n    tick()\n      .then(() => {\n        /**\n         * conditional tick() required to properly delay calling positionDropdown when lazy & virtual list\n         * initializing for the first time, because of its internal use of tick()\n         */\n        if (!alreadyRendered && virtualList) return tick();\n      })\n      .then(() => {\n        positionResolver === _noop && positionDropdown(val, ref_container_scroll, true);\n        if (val) {\n          // ensure proper dropdown index\n          // do not respect highlightFirstItem here\n          if (highlightFirstItem && (selectedOptions.length === 0 || multiple)) setDropdownIndex(0, { asc: true});\n          if (!multiple && selectedOptions.length) {\n            // ensure item is set\n            dropdown_index = options_flat.findIndex(opt => opt[currentValueField] === selectedOptions[0][currentValueField]);\n          }\n          scrollIntoView({ container: ref_container, scrollContainer: ref_container_scroll, virtualList, center: false }, dropdown_index);\n        }\n        tick().then(() => dropdown_show = val);\n      });\n    if (!dropdown_scroller) dropdown_scroller = () => positionResolver === _noop && positionDropdown(val, ref_container_scroll, true);\n    // bind/unbind scroll listener\n    document[val ? 'addEventListener' : 'removeEventListener']('scroll', dropdown_scroller, { passive: true });\n  }\n\n  /**\n   * @param {boolean} maxReached\n   * @param {array} options_filtered\n   */\n  function watch_listMessage(maxReached, options_filtered) {\n    // fetch-related states are handled manually\n    if (fetch && !fetch_initOnly) return;\n\n    if (maxReached) {\n      listMessage = i18n_actual.max(max);\n      return;\n    }\n\n    listMessage = options_filtered.length !== options_flat.length && selectedOptions.length !== options_flat.length\n      ? (creatable\n        ? i18n_actual.emptyCreatable\n        : i18n_actual.nomatch\n      )\n      : (creatable\n        ? i18n_actual.emptyCreatable\n        : i18n_actual.empty\n      );\n  }\n\n  // #endregion\n\n  // #region [event-emitters]\n\n  /**\n   * Dispatch change event on add options/remove selected items\n   */\n   function emitChangeEvent() {\n    const objectSelection = compute_selection(true);\n    const valueSelection = compute_selection(false);\n    prev_value = valueAsObject ? objectSelection : valueSelection;\n    value = prev_value;\n    readSelection = objectSelection;\n    tick().then(() => {\n      onChange(emitValues ? valueSelection : objectSelection);\n      if (ref_select_element) {\n        ref_select_element.dispatchEvent(new Event('change'));  // typically you expect change event to be fired\n      }\n    });\n  }\n\n  // #endregion\n\n  // #region [interactivity]\n\n  /**\n   * Handle user action on select\n   */\n   function onSelect(event, opt) {\n    opt = opt || event.detail;\n    if (disabled || opt[disabledField] || opt.$isGroupHeader) return;\n    if (!opt || (multiple && maxReached)) return false;\n    if (selectedKeys.has(opt[currentValueField])) {\n      if (!multiple && deselectMode !== 'toggle') return;\n      return onDeselect(opt);\n    }\n\n    // creatable branch\n    if (typeof opt === 'string') {\n      if (!creatable) return;\n      opt = onCreate_helper(opt);\n      if (alreadyCreated.includes(opt) || selectedKeys.has(opt)) return;\n\n      isCreating = true;\n      Promise.resolve()\n        .then(() => createHandlerFn({\n          inputValue: opt,\n          valueField: currentValueField,\n          labelField: currentLabelField,\n          prefix: creatablePrefix\n        }))\n        .then(newObj => {\n          isCreating = false;\n          !fetch && alreadyCreated.push(opt);\n          newObj.$created = true;  // internal setter\n          if (keepCreated) {\n            prev_options.push(newObj);\n            newObj = prev_options[prev_options.length - 1]; // get proxy-wrapped version to make it reactive in dropdown\n          }\n          onCreateOption(newObj);\n          selectOption(newObj);\n          onSelectTeardown();\n          emitChangeEvent();\n        })\n        .catch(e => {\n          isCreating = false;\n          onCreateFail({\n            input: opt,\n            error: e\n          });\n        });\n\n      return;\n    }\n\n    selectOption(opt);\n    onSelectTeardown();\n    emitChangeEvent();\n  }\n\n  function onSelectTeardown() {\n    if ((multiple && resetOnSelect) || !multiple) input_value = '';\n    if (closeAfterSelect === true || (closeAfterSelect === 'auto' && !multiple)) {\n      updateDropdownState(false);\n    }\n    if (max && selectedOptions.length == max) {\n      dropdown_index = 0;\n    }\n  }\n\n  /**\n   * Add given option to selection pool\n   * Check if not already selected or max item selection reached\n   *\n   * @returns bool\n   */\n  function selectOption(opt) {\n    opt.$selected = true;\n    if (multiple) {\n      selectedOptions.push(opt);\n      selectedKeys.add(opt[currentValueField]);\n    } else {\n      const previousSelected = selectedOptions.shift();\n      if (previousSelected) previousSelected.$selected = false;\n      selectedOptions = [opt];\n      selectedKeys.clear();\n      selectedKeys.add(opt[currentValueField]);\n      tick().then(() => {\n        const idx = options_flat.indexOf(opt);\n        dropdown_index = idx < 0\n          ? 0\n          : idx;\n      });\n    }\n\n    if (optionResolver) {\n      tick().then(() => {\n        prev_options = optionResolver(options, selectedKeys)\n      });\n    }\n\n    // options_flat = options_flat;\n    return true;\n  }\n\n  /**\n   *\n   * @param {object} [opt]\n   * @param {boolean} [backspacePressed]\n   */\n  function onDeselect(opt = null, backspacePressed) {\n    if (disabled) return;\n    if (opt) {\n      deselectOption(opt, backspacePressed);\n      /**\n       * Condition for keepSelectionInList is important, othwise dropdown jump back to start.\n       * It's required only for multiselect with default 'closeAfterSelect' setting.\n       */\n      keepSelectionInList !== true && tick().then(() => scrollIntoView({ scrollContainer: ref_container_scroll, container: ref_container, virtualList, center: false}, dropdown_index));\n    } else {  // apply for 'x' when clearable:true || ctrl+backspace || ctrl+delete\n      clearSelection();\n    }\n    emitChangeEvent();\n  }\n\n  /**\n   * Remove option/all options from selection pool\n   *\n   * @param {object} opt,\n   * @param {boolean} [backspacePressed]\n   */\n   function deselectOption(opt, backspacePressed) {\n    if (opt.$created) {\n      if (!keepCreated) {\n        alreadyCreated.splice(alreadyCreated.findIndex(o => o === opt[currentValueField]), 1);\n        const idx = prev_options.findIndex(o => o[currentValueField] === opt[currentValueField]);\n        idx !== -1 && prev_options.splice(idx, 1);\n        prev_options = prev_options;\n      }\n      if (backspacePressed && allowEditing) {\n        input_value = opt[currentLabelField].replace(creatablePrefix, '');\n      }\n    }\n    opt.$selected = false;\n    const id = opt[currentValueField];\n    selectedKeys.delete(id);\n    selectedOptions.splice(selectedOptions.findIndex(o => o[currentValueField] == id), 1);\n\n    if (optionResolver) {\n      prev_options = optionResolver(options, selectedKeys);\n      return;\n    }\n\n    if (fetch && !fetch_initOnly && fetchResetOnBlur) options_flat_override = true; // results in `options_flat = []`\n  }\n\n  function clearSelection() {\n    if (selectedKeys.size === 0 || (!multiple && deselectMode==='none')) return;\n    selectedKeys.clear();\n\n    selectedOptions = selectedOptions.reduce((_, opt) => {\n      opt.$selected = false;\n      return [];\n    }, []);\n    if (!keepCreated) alreadyCreated = [];  // ref #198\n    if (input_value) input_value = '';\n\n    if (optionResolver) {\n      prev_options = optionResolver(options, selectedKeys);\n      return;\n    }\n\n    if (fetch && !fetch_initOnly && fetchResetOnBlur) options_flat_override = true; // results in `options_flat = []`\n  }\n\n  function on_create(event) {\n    event.preventDefault();\n    if (alreadyCreated.includes(input_value)) return;\n\n    onSelect(null, input_value);\n  }\n\n  /**\n   * @param {KeyboardEvent} event\n   */\n  function processKeyDown(event) {\n    if (creatable && delimiter.indexOf(event.key) > -1) {\n      input_value.length > 0 && onSelect(null, input_value); // prevent creating item with delimiter itself\n      event.preventDefault();\n      return;\n    }\n    const Tab = selectOnTab && is_dropdown_opened && !event.shiftKey ? 'Tab' : 'No-tab';\n    let ctrlKey = isIOS ? event.metaKey : event.ctrlKey;\n    let isPageEvent = ['PageUp', 'PageDown'].includes(event.key);\n    let backspacePressed = false;\n    let supressIndexMove = false;\n    switch (event.key) {\n      case 'End':\n        if (input_value.length !== 0) return;\n        setDropdownIndex(options_filtered.length, { desc: true });\n      case 'PageDown':\n        if (isPageEvent) {\n          const [wrap, item] = get_dropdown_dimensions();\n          dropdown_index = Math.min(\n            // @ts-ignore\n            Math.ceil((item * dropdown_index + wrap) / item), // can be more than max, therefore Math.min\n            options_filtered.length + (creatable && input_value ? 1 : 0)\n          );\n        }\n      case 'ArrowUp':\n        event.preventDefault();\n        if (!is_dropdown_opened) {\n          updateDropdownState(true);\n          return;\n        }\n        setDropdownIndex(dropdown_index - 1, { desc: true });\n        tick().then(() => scrollIntoView({ scrollContainer: ref_container_scroll, container: ref_container, virtualList, center: false}, dropdown_index));\n        break;\n      case 'Home':\n        supressIndexMove = true;\n        if (input_value.length !== 0\n          || (input_value.length === 0 && options_filtered.length === 0)  // ref #26\n        ) return;\n        setDropdownIndex(0, { asc: true });\n      case 'PageUp':\n        if (isPageEvent) {\n          const [wrap, item] = get_dropdown_dimensions();\n          // @ts-ignore\n          dropdown_index = Math.floor((item * dropdown_index - wrap) / item);\n        }\n      case 'ArrowDown':\n        event.preventDefault();\n        if (!is_dropdown_opened) {\n          updateDropdownState(true);\n          return;\n        }\n        // not to skip first item when `highlightFirstItem=false`\n        const dix = dropdown_index === null ? -1 : dropdown_index;\n        !supressIndexMove && setDropdownIndex(dix + 1, { asc: true });\n        tick().then(() => scrollIntoView({ scrollContainer: ref_container_scroll, container: ref_container, virtualList, center: false}, dropdown_index));\n        break;\n      case 'Escape':\n        if (is_dropdown_opened) { // prevent ESC bubble in this case (interfering with modal closing etc. (bootstrap))\n          event.preventDefault();\n          event.stopPropagation();\n        }\n        if (!input_value) {\n          updateDropdownState(false);\n        }\n        input_value = '';\n        break;\n      case Tab:\n      case 'Enter':\n        if (!is_dropdown_opened) {\n          event.key !== Tab && onEnterKey(event); // ref #125\n          return;\n        }\n        let activeDropdownItem = !ctrlKey ? options_filtered[dropdown_index] : null;\n        if (creatable && !activeDropdownItem && input_value) {\n          const preventCreation = createFilterFn(onCreate_helper(input_value));\n          activeDropdownItem = !activeDropdownItem || ctrlKey\n            ? onCreate_helper(input_value)\n            : activeDropdownItem\n          ctrlKey = preventCreation;  // previously ctrlKey was set to `false` which resulted in item being not respecting createFilter result\n        }\n        !ctrlKey && activeDropdownItem && onSelect(null, activeDropdownItem);\n        if (options_filtered.length <= dropdown_index) {\n          setDropdownIndex(options_filtered.length - 1);\n        }\n        if (!activeDropdownItem && selectedOptions.length) {\n          updateDropdownState(false);\n          event.key !== Tab && onEnterKey(event); // ref #125\n          return;\n        }\n        (event.key !== Tab || (event.key === Tab && selectOnTab !== 'select-navigate')) && event.preventDefault(); // prevent form submit\n        break;\n      case ' ':\n        if (!fetch && !is_dropdown_opened) {\n          updateDropdownState(true);\n          event.preventDefault();\n        }\n        break;\n      case 'Backspace':\n        if (collapseSelection === 'always') return;\n        backspacePressed = true;\n      case 'Delete':\n        if (input_value === '' && selectedOptions.length) {\n          if (!multiple && deselectMode === 'none') return;\n          ctrlKey ? onDeselect() : onDeselect(selectedOptions[selectedOptions.length - 1], backspacePressed);\n          event.preventDefault();\n        }\n      default:\n        if (!ctrlKey && !['Tab', 'Shift'].includes(event.key) && !is_dropdown_opened && !isFetchingData) {\n          updateDropdownState(true);\n        }\n    }\n  }\n\n  /**\n   * Prevent focus change\n   * @param {MouseEvent} event\n   */\n  function on_mouse_down(event) {\n    event.preventDefault();\n  }\n\n  /**\n   * Single click handler. Unified for dropdown items, for selected items and 'x' clear button\n   *\n   * @param {MouseEvent & { currentTarget: EventTarget & HTMLDivElement} & { target: HTMLElement }} event\n   */\n  function on_click(event) {\n    if (disabled) return;\n\n    const target = /** @type {HTMLElement & import('./utils/actions.js').ExtButton} */ (event.target.closest('[data-action]'));\n\n    if (!focus_by_mouse) focus_by_mouse = true;\n    // allow escaping click handler\n    if (target?.dataset.action === 'default') return;\n\n    event.preventDefault();\n    const dropdown_item = /** @type {HTMLElement & {dataset: { pos: string }}} */ (event.target.closest('[data-pos]'));\n\n    // handle click on selection row (general focus & toggle dropdown event)\n    if (!target && !dropdown_item) {\n      return focusControl(event.target);\n    }\n    const action = target?.dataset.action || 'select';\n\n    // dropdown items has no data-action set\n    switch(action) {\n      case 'deselect':\n        let bound_item = target.bound_item;\n        // otherwise try to get item id from data-id prop\n        if (!bound_item) {\n          const dataId = target.dataset.id;\n          bound_item = selectedOptions.filter(o => o[currentValueField] == dataId).shift();\n        }\n        onDeselect(bound_item);\n        bound_item && !is_focused && ref_input.focus();\n        break;\n      case 'select':\n        const opt_position = parseInt(dropdown_item.dataset.pos);\n        onSelect(null, options_filtered[opt_position]);\n        break;\n      case 'toggle':\n        updateDropdownState(!is_dropdown_opened);\n        break;\n    }\n  }\n\n  /**\n   * @param {KeyboardEvent} e\n   */\n   function on_key_down(e) {\n    if (android() && !enter_hint && e.key === 'Enter') return true;\n\n    disable_key_event_bubble = ['Enter', 'Escape'].includes(e.key) && is_dropdown_opened;\n    processKeyDown(e);\n  }\n\n  /**\n   * @param {KeyboardEvent} e\n   */\n  function on_key_up(e) {\n    if (disable_key_event_bubble) {\n      e.stopImmediatePropagation();\n      e.preventDefault();\n    }\n    disable_key_event_bubble = false;\n  }\n\n  /**\n   * Required for mobile single select to work properly\n   */\n  function on_input() {\n    if (selectedOptions.length === 1 && !multiple) {\n      // input_value = '';\n    }\n  }\n\n  function on_focus() {\n    is_focused = true;\n    updateDropdownState(focus_by_mouse);\n    if (!is_tainted) is_tainted = true;\n    collapseSelection === 'blur' && !is_dragging && setTimeout(() => {\n      doCollapse = false;\n    }, 100);\n    onFocus(ref_input);\n  }\n\n  function on_blur() {\n    is_focused = false;\n    updateDropdownState(false);\n    focus_by_mouse = false;\n    if (resetOnBlur) {\n      input_value = '';\n    } else {\n      fetch_controller && !fetch_initOnly && fetch_controller.abort('blur');\n    }\n    collapseSelection === 'blur' && !is_dragging && setTimeout(() => {\n      doCollapse = true;\n    }, 100);\n    onBlur(ref_input);\n  }\n\n  /**\n   * Enable create items by pasting\n   */\n   function on_paste(event) {\n    if (creatable) {\n      event.preventDefault();\n      const rx = new RegExp('([^' + delimiter + '\\\\n]+)', 'g');\n      const pasted = event.clipboardData\n        .getData('text/plain')\n          .replace(/\\//g, '\\/')\n          .replace(/\\t/g, ' ');\n      const matches = pasted.match(rx);\n      if (matches.length === 1 && pasted.indexOf(',') === -1) {\n        input_value = matches.pop().trim();\n      }\n      matches.forEach(opt  => onSelect(null, opt.trim()));\n    }\n    // do nothing otherwise\n  }\n\n  function on_dnd_event(e) {\n    is_dragging = e.type === 'consider';\n    selectedOptions = e.detail.items;\n    if (!is_dragging) {\n      emitChangeEvent();\n      if (collapseSelection === 'blur') setTimeout(() => {\n        doCollapse = true;\n      }, 200);\n    }\n  }\n\n  // #endregion\n\n  // #region [fetch]\n\n  /** @type {AbortController?} */\n  let fetch_controller;\n\n  /** @type {function|null} */\n  let debouncedFetch;\n\n  $effect(() => {\n    trigger_fetch(input_value);\n  });\n  $effect(() => {\n    watch_fetch_init(fetch, parentValue)\n  });\n\n  let listMessage = $state(fetch\n    ? (fetch_initOnly\n      ? i18n_actual.fetchInit\n      : (minQuery > 1\n        ? i18n_actual.fetchQuery(minQuery, 0)\n        : i18n_actual.fetchBefore\n      )\n    )\n    : (creatable\n      ? i18n_actual.emptyCreatable\n      : i18n_actual.empty\n    )\n  );\n\n  /**\n   *\n   * @param {string?} fetch\n   * @param {string|number|null|undefined} _parentValue\n   */\n  function watch_fetch_init(fetch, _parentValue) {\n    if (!fetch) {\n      debouncedFetch = null;\n      return;\n    }\n\n    if (fetch_initOnly || fetch_initValue) {\n      isFetchingData = true;\n      fetch_runner({init: true}); // skip debounce on init\n    }\n\n    debouncedFetch = debounce(fetch_runner, fetchDebounceTime);\n  }\n\n  /**\n   * User only for QUERY mode\n   *\n   * @param {string} inputValue\n   */\n  function trigger_fetch(inputValue) {\n    if (fetch_initOnly || maxReached) {\n      listMessage = maxReached\n        ? i18n_actual.max(max)\n        : i18n_actual.fetchInit;\n      return;\n    }\n    if (debouncedFetch) {\n      fetch_controller?.abort();\n      isFetchingData = true;\n      if (input_value.length < minQuery) {\n        isFetchingData = false;\n      }\n      if (!optionResolver && fetchResetOnBlur) options_filtered_override = [];\n      dropdown_show = inputValue.length >= minQuery\n        ? creatable\n        : true;\n      listMessage = maxReached\n        ? i18n_actual.max(max)\n        : (minQuery <= 1\n          ? i18n_actual.fetchBefore\n          : i18n_actual.fetchQuery(minQuery, inputValue.length)\n        );\n      debouncedFetch();\n    }\n  }\n  /**\n   * @typedef {{\n   *  init?: boolean,\n   *  initValue?: any,\n   *  storedValue?: boolean\n   * }} FetchOptions\n   *\n   * @param {FetchOptions} opts\n   */\n  function fetch_runner(opts = {}) {\n    fetch_controller?.abort();\n    if ((opts.init !== true && !input_value.length) || (is_fetch_dependent && !parentValue)) {\n      isFetchingData = false;\n      if (fetchResetOnBlur) {\n        prev_options = optionResolver ? optionResolver(options, selectedKeys) : [];\n      }\n      return;\n    }\n\n    if (input_value && input_value.length < minQuery) {\n      isFetchingData = false;\n      return;\n    }\n\n    // update fetchInitValue when fetch is changed, but we are in 'init' mode, ref #113\n    if (fetch_initOnly && prev_value && (!multiple || prev_value?.length > 0)) fetch_initValue = prev_value;\n\n    const initial = $state.snapshot(fetch_initValue || opts.initValue);\n    let initialFetchValue;\n    if (initial) {\n      initialFetchValue = valueAsObject\n        ? (multiple\n          ? initial.map(opt => opt[currentValueField])\n          : initial[currentValueField]\n        )\n        : initial;\n    }\n\n    if (fetch_initOnly) {\n      listMessage = i18n_actual.fetchInit;\n    // edge-case! To prevent initial 'empty' fetch with resolver\n    } else if (initial && optionResolver) {\n      fetch_initValue = null;\n      listMessage = minQuery > 1\n        ? i18n_actual.fetchQuery(minQuery, input_value.length)\n        : i18n_actual.fetchBefore;\n      return;\n    }\n    const built = defaults.requestFactory(\n      input_value,\n      { parentValue, url: fetch, initial: initialFetchValue },\n      typeof fetchProps === 'function' ? fetchProps() : fetchProps\n    );\n    fetch_controller?.abort();\n    fetch_controller = built.controller;\n    window.fetch(built.request)\n      .then(resp => resp.json())\n      // success\n      .then((/** @type {object} */ json) => {\n        // sveltekit returns error property\n        if (!Array.isArray(json) && json?.error) onFetchError(json.error);\n        return Promise.resolve(fetchCallback\n          ? fetchCallback(json)\n          : (json.data || json.items || json.options || json)\n        )\n          .then(data => {\n            if (!Array.isArray(data)) {\n              console.warn('[Svelecte]:Fetch - array expected, invalid property provided:', data);\n              data = [];\n            }\n            options_flat_override = false;\n            options_filtered_override = null;\n            prev_options = flatList(data, itemConfig);\n            onFetch(data);\n\n            // tick().then(() => {\n              if (initial) {\n                fetch_initValue = null; // always reset\n                watch_value_change(initial, { skipEqualityCheck: true });\n                if ('storedValue' in opts) fetchResetOnBlur = opts.storedValue; // related to re-fetch\n              }\n            // })\n          })\n      })\n      // error\n      .catch(e => {\n        if (e instanceof DOMException && e.name === 'AbortError') return true;\n        options_filtered_override = null;\n        prev_options = [];\n        onFetchError(e);\n        console.warn('[Svelecte] Fetch Error:', e);\n      })\n      // teardown\n      .then(fetchAborted => {\n        if (fetchAborted === true) return;\n        listMessage = fetch_initOnly\n          ? i18n_actual.empty\n          : (initial\n            ? (minQuery > 1\n              ? i18n_actual.fetchQuery(minQuery, 0)\n              : i18n_actual.fetchBefore\n            )\n            : i18n_actual.fetchEmpty\n          );\n        fetch_controller = null;\n        isFetchingData = false;\n        if (is_focused) updateDropdownState(true);\n\n        if (is_dropdown_opened && !dropdown_show) {\n          dropdown_show = true;\n        }\n      });\n  }\n\n  // #endregion\n\n  // #region [helper functions]\n\n  /**\n   * Resolve whether already selected items should be shown or not in the dropdown.\n   *\n   * @param {string} inputValue\n   */\n  function resolveExcludedValue(inputValue) {\n    if (!keepSelectionInList) return selectedKeys;\n    if (keepSelectionInList === true) return inputValue ? selectedKeys : null;\n    // 'auto' otherwise\n    return inputValue\n      ? selectedKeys\n      : (multiple\n        ? selectedKeys\n        : null\n      );\n  }\n\n  /**\n   * @typedef {object} DirectionSettings\n   * @property {boolean} [asc]\n   * @property {boolean} [desc]\n   *\n   * @param {number} pos\n   * @param {DirectionSettings} direction\n   */\n   function setDropdownIndex(pos, direction = {}, limit = 0) {\n    const dropdown_list_length = creatable && input_value\n      ? options_filtered.length + 1\n      : options_filtered.length;\n    if (limit >= 2) return;\n    if (pos < 0) pos = direction.desc\n      ? dropdown_list_length - 1\n      : 0;\n    if ((dropdown_index === null && highlightFirstItem) || pos >= dropdown_list_length) {\n      pos = 0;\n    }\n    // if pos represents group header, move to next one\n    if (options_filtered[pos]?.$isGroupHeader) {\n      setDropdownIndex(direction.asc\n        ? pos + 1\n        : pos - 1, direction, ++limit\n      );\n      return;\n    }\n    dropdown_index = pos;\n  }\n\n  /**\n   * FUTURE: take into account searchable to keep inputmode=none - is this even valid?\n   *\n   * @param {HTMLElement} target\n   */\n  function focusControl(target) {\n    if (disabled) return;\n    if (!is_focused) {\n      ref_input.focus();\n      return;\n    }\n    if (target.tagName === 'INPUT' && input_value) {\n      return;\n    }\n\n    updateDropdownState(!is_dropdown_opened);\n  }\n\n  /**\n   * @returns {[listHeight: number, itemSize?: number]}\n   */\n  function get_dropdown_dimensions() {\n    if (virtualList) {\n      return [\n        pixelGetter(ref_container_scroll, 'maxHeight')\n          - pixelGetter(ref_container_scroll, 'paddingTop')\n          - pixelGetter(ref_container_scroll, 'paddingBottom'),\n        ref_virtuallist?.resolveItemSize()\n      ];\n    }\n    return [\n      ref_container_scroll.offsetHeight,\n      // @ts-ignore\n      ref_container.firstElementChild.offsetHeight\n    ];\n  }\n\n  //#endregion\n\n\n  onMount(() => {\n    is_mounted = true;\n    // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/platform#examples\n    isIOS = navigator.platform.indexOf(\"Mac\") === 0 || navigator.platform === \"iPhone\";\n    meta_key = isIOS ? 'âŒ˜' : 'Ctrl';\n    if (anchor_element) {\n      // @ts-ignore\n      ref_select_element = document.getElementById(anchor_element);\n      ref_select_element.className = 'sv-hidden-element';\n      ref_select_element.innerHTML = '';\n      ref_select_element.tabIndex = -1;\n      // this setup is required, because definition can be on el-svelecte only (not on underlying <select>)\n      ref_select_element.disabled = disabled;\n      ref_select_element.required = required;\n      ref_select_element.multiple = multiple;\n      !multiple && ref_select_element.insertAdjacentHTML('beforeend', '<option value=\"\" selected>Empty</option>');\n      selectedKeys.forEach(k => {\n        ref_select_element.insertAdjacentHTML('beforeend', `<option value=${k} selected>${k}</option>`);\n      });\n    };\n    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) flipDurationMs = 0;\n  });\n</script>\n\n{#snippet snippet_collapsedSelection(selectedOptions, i18n)}\n  <span>{i18n.collapsedSelection(selectedOptions.length)}</span>\n{/snippet}\n\n{#snippet snippet_selection(selectedOptions, bindItemAction)}\n  {#each selectedOptions as opt (opt[currentValueField])}\n  <!-- svelte-ignore a11y_no_static_element_interactions -->\n  <div class=\"sv-item--container\" animate:flip={{duration: flipDurationMs }} onmousedown={e => e.preventDefault()}>\n    <div class=\"sv-item--wrap in-selection\" class:is-multi={multiple}>\n      <div class=\"sv-item--content\">{@html itemRenderer(opt, true)}</div>\n    </div>\n    {#if multiple}\n    <button class=\"sv-item--btn\" tabindex=\"-1\" type=\"button\"\n      data-action=\"deselect\"\n      aria-label={i18n_actual.aria_removeItemLabel(opt, currentLabelField)}\n      use:bindItemAction={opt}\n    >\n      <svg height=\"16\" width=\"16\" viewBox=\"0 0 20 20\" aria-hidden=\"true\" focusable=\"false\">\n        <path d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path>\n      </svg>\n    </button>\n    {/if}\n  </div>\n  {/each}\n{/snippet}\n\n{#snippet snippet_clearIcon(_selectedOptions, _inputValue)}\n  {#if selectedOptions.length}\n    <svg class=\"indicator-icon\" viewBox=\"0 0 20 20\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path></svg>\n  {/if}\n{/snippet}\n\n{#snippet snippet_toggleIcon(_dropdownShow)}\n<svg class=\"indicator-icon\" viewBox=\"0 0 20 20\" aria-hidden=\"true\" focusable=\"false\">\n  <path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\n</svg>\n{/snippet}\n\n{#snippet snippet_option(opt, inputValue)}\n<div class=\"sv-item--content\">\n  {@html highlightSearch(opt, false, inputValue, itemRenderer, disableHighlight) }\n</div>\n{/snippet}\n\n{#snippet snippet_createRow(isCreating, inputValue, i18n)}\n<span class:is-loading={isCreating}>{i18n.createRowLabel(inputValue)}</span>\n<span class=\"shortcut\"><kbd>{meta_key}</kbd>+<kbd>Enter</kbd></span>\n{/snippet}\n\n<div class={[`svelecte`, className]}\n  class:is-required={required}\n  class:is-empty={selectedOptions.length === 0}\n  class:is-invalid={required && selectedOptions.length === 0}\n  class:is-tainted={is_tainted}\n  class:is-valid={required ? selectedOptions.length > 0 : true}\n  class:is-focused={is_focused}\n  class:is-open={is_dropdown_opened}\n  class:is-disabled={disabled}\n  role=\"none\"\n>\n  <span aria-live=\"polite\" aria-atomic=\"false\" aria-relevant=\"additions text\" class=\"a11y-text\">\n    {#if is_focused}\n      <span id=\"aria-selection\">{aria_selection}</span>\n      <span id=\"aria-context\">{aria_context}</span>\n    {/if}\n  </span>\n  {#if name && !anchor_element}\n  <select {name} {required} {multiple} {disabled} size=\"1\" class=\"sv-hidden-element\" id={DOM_ID} tabindex=\"-1\" aria-hidden=\"true\"\n    bind:this={ref_select_element}\n  >\n    {#each selectedOptions as opt (opt[currentValueField])}\n    <option value={opt[currentValueField]} selected>{opt[currentValueField]}</option>\n    {/each}\n  </select>\n  {/if}\n  <!-- svelte-ignore a11y_no_static_element_interactions -->\n  <!-- svelte-ignore a11y_click_events_have_key_events -->\n  <div class=\"sv-control {controlClass}\" onmousedown={on_mouse_down} onclick={on_click}>\n    {#if prepend}{@render prepend()}{/if}\n    <!-- #region selection & input -->\n    <div class=\"sv-control--selection\" class:is-single={multiple === false} class:has-items={selectedOptions.length > 0} class:has-input={input_value.length}\n      use:dndzone={{items: selectedOptions, flipDurationMs, type: inputId, dragDisabled: doCollapse }}\n      onconsider={on_dnd_event}\n      onfinalize={on_dnd_event}\n    >\n      {#if selectedOptions.length && multiple && doCollapse}\n        {@render collapsedSelection(selectedOptions, i18n_actual)}\n      {:else if selectedOptions.length}\n        {@render selection(selectedOptions, bindItem)}\n      {/if}\n\n      <!-- #regions INPUT -->\n      <span class=\"sv-input--sizer\" data-value={input_value || placeholder_active}>\n        <input type=\"text\" class=\"sv-input--text\" size=\"1\" class:keep-value={!resetOnBlur}\n          id={inputId}\n          placeholder={input_value ? '' : placeholder_active}\n          inputmode={input_mode}\n          readonly={!searchable}\n          enterkeyhint={enter_hint}\n          {disabled}\n          aria-label={i18n_actual.aria_label} aria-describedby={i18n_actual.aria_describedby}\n          autocapitalize=\"none\" autocomplete=\"off\" autocorrect=\"off\" spellcheck=\"false\" aria-autocomplete=\"list\" tabindex=\"0\"\n          bind:this={ref_input}\n          bind:value={input_value}\n          onfocus={on_focus}\n          onkeydown={on_key_down}\n          onkeyup={on_key_up}\n          oninput={on_input}\n          onblur={on_blur}\n          onpaste={on_paste}\n          >\n      </span>\n      <!-- #endregion -->\n    </div>\n    <!-- #endregion -->\n\n    <!-- #region buttons, indicators -->\n    <div class=\"sv-buttons\" class:is-loading={isFetchingData}>\n      {#if clearable && !disabled}\n      <button type=\"button\" class=\"sv-btn-indicator\" class:sv-has-selection={selectedOptions.length}\n        data-action=\"deselect\"  tabindex=\"-1\"\n      >\n        {@render clearIcon(selectedOptions, input_value)}\n      </button>\n      {/if}\n      {#if clearable}<span class=\"sv-btn-separator\"></span>{/if}\n      <button type=\"button\" class=\"sv-btn-indicator\" class:sv-dropdown-opened={is_dropdown_opened}\n        data-action=\"toggle\" tabindex=\"-1\"\n      >\n        {@render toggleIcon(is_dropdown_opened)}\n      </button>\n    </div>\n    {#if append}{@render append()}{/if}\n    <!-- #endregion -->\n  </div>\n\n  <!-- #region DROPDOWN -->\n  <!-- svelte-ignore a11y_no_static_element_interactions -->\n  <!-- svelte-ignore a11y_click_events_have_key_events -->\n  <div class=\"sv_dropdown {dropdownClass} \" class:is-open={dropdown_show}\n    onmousedown={on_mouse_down}\n    onclick={on_click}\n    use:positionResolver\n  >\n  {#if is_mounted && render_dropdown}\n      {#if listHeader}{@render listHeader()}{/if}\n      <div bind:this={ref_container_scroll} class=\"sv-dropdown-scroll\" class:has-items={options_filtered.length>0} class:is-virtual={virtualList} tabindex=\"-1\">\n        <div bind:this={ref_container} class=\"sv-dropdown-content\" class:max-reached={maxReached} >\n          {#if virtualList && ref_container_scroll}\n            <VirtualList\n              bind:this={ref_virtuallist}\n              maxHeight={get_dropdown_dimensions().shift()}\n              itemHeight={vlItemSize}\n              itemCount={options_filtered.length || 0}\n              scrollToIndex={dropdown_index}\n            >\n              {#snippet children(index)}\n                {@const opt = options_filtered[index] || {}}\n                {#if opt.$isGroupHeader}\n                  <div class=\"sv-optgroup-header\"><b>{opt.label}</b></div>\n                {:else}\n                  <div data-pos={index}\n                    class=\"sv-item--wrap in-dropdown {optionClass}\"\n                    class:sv-dd-item-active={dropdown_index === index}\n                    class:is-selected={opt.$selected || selectedKeys.has(opt[currentValueField])}\n                    class:is-disabled={opt[disabledField]}\n                  >\n                    {@render option(opt, input_value)}\n                  </div>\n                {/if}\n              {/snippet}\n            </VirtualList>\n          {:else if virtualList === false}\n            {#each options_filtered as opt, i}\n              {#if opt.$isGroupHeader}\n                <div class=\"sv-optgroup-header\"><b>{opt.label}</b></div>\n              {:else}\n                <div data-pos={i}\n                  class=\"sv-item--wrap in-dropdown {optionClass}\"\n                  class:sv-dd-item-active={dropdown_index === i}\n                  class:is-selected={opt.$selected}\n                  class:is-disabled={opt[disabledField]}\n                >\n                  {@render option(opt, input_value)}\n                </div>\n              {/if}\n            {/each}\n          {/if}\n        {#if options_filtered.length === 0 && (!creatable || !input_value) || maxReached}\n          <div class=\"is-dropdown-row\">\n            <div class=\"sv-item--wrap in-dropdown {optionClass}\"><div class=\"sv-item--content\">{listMessage}</div></div>\n          </div>\n        {/if}\n      </div>\n    </div> <!-- scroll container end -->\n    {#if creatable && input_value && !maxReached}\n      <div class=\"is-dropdown-row\">\n        <button type=\"button\" class=\"creatable-row\" onclick={on_create} onmousedown={e => e.preventDefault()}\n          class:active={(options_filtered.length ? options_filtered.length : 0) === dropdown_index}\n          class:is-disabled={createFilterFn(input_value)}\n          disabled={createFilterFn(input_value)}\n        >\n          {@render createRow(isCreating, input_value, i18n_actual)}\n        </button>\n      </div>\n    {/if}\n  {/if}\n  <!-- #endregion -->\n  </div>\n</div> <!-- /svelecte -->\n\n<style>\n  /** make it global to be able to apply it also for anchored select */\n  :global(.sv-hidden-element) { opacity: 0; position: absolute; z-index: -2; top: 0; height: var(--sv-min-height, 30px)}\n\n  /* stylable props */\n  /*\n  :root {\n    --sv-min-height: 34px;\n    --sv-bg: #fff;\n    --sv-disabled-bg: #eee;\n    --sv-border: 1px solid #ccc;\n    --sv-border-radius: 4px;\n    --sv-selection-gap: 4px;\n    --sv-general-padding: 4px;\n    --sv-control-bg: var(--sv-bg);\n    --sv-selection-wrap-padding: 0px 3px 0px 4px;\n    --sv-selection-multi-wrap-padding: 0px 3px 0px 6px;\n    --sv-item-wrap-padding: 3px 3px 3px 6px;\n    --sv-item-selected-bg: #efefef;\n    --sv-item-btn-color: #000;\n    --sv-item-btn-color-hover: #777;\n    --sv-item-btn-bg: #efefef;\n    --sv-item-btn-bg-hover: #ddd;\n    --sv-icon-color: #bbb;\n    --sv-icon-color-hover: #777;\n    --sv-icon-bg: transparent;\n    --sv-icon-size: 20px;\n    --sv-separator-bg: #ccc;\n    --sv-btn-border: 0;\n    --sv-placeholder-color: #ccccd6;\n    --sv-dropdown-bg: var(--sv-bg);\n    --sv-dropdown-offset: 1px;\n    --sv-dropdown-border: 1px solid rgba(0,0,0,0.15);\n    --sv-dropdown-width: auto;\n    --sv-dropdown-shadow: 0 6px 12px #0000002d;\n    --sv-dropdown-height: 320px;\n    --sv-dropdown-active-bg: #F2F5F8;\n    --sv-dropdown-selected-bg: #ECF3F9;\n    --sv-create-disabled-bg: #fcbaba;\n    --sv-create-kbd-border: 1px solid #efefef;\n    --sv-create-kbd-bg: #fff;\n    --sv-loader-border: 2px solid #ccc;\n  }\n  */\n  .a11y-text {\n    z-index: 9999;\n    border: 0px;\n    clip: rect(1px, 1px, 1px, 1px);\n    height: 1px;\n    width: 1px;\n    position: absolute;\n    overflow: hidden;\n    padding: 0px;\n    white-space: nowrap;\n  }\n  .svelecte {\n    position: relative;\n    flex: 1 1 auto;\n    color: var(--sv-color, inherit);\n\n    &.is-disabled > .sv-control {\n      background-color: var(--sv-disabled-bg, #eee);\n    }\n  }\n\n  .sv-control {\n    display: flex;\n    align-items: center;\n    border: var(--sv-border, 1px solid #ccc);\n    border-radius: var(--sv-border-radius, 4px);\n    background-color: var(--sv-control-bg, var(--sv-bg, #fff));\n    min-height: var(--sv-min-height, 34px);\n  }\n\n  .sv-control--selection {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    flex: 1;\n    min-width: 0;\n    gap: var(--sv-selection-gap, 4px);\n    padding: var(--sv-selection-gap, var(--sv-general-padding, 4px));\n    min-height: 24px;\n    &.is-single {\n      flex-wrap: nowrap;\n    }\n  }\n  :global(.sv-item--container) {\n    display: flex;\n    min-width: 0;\n  }\n  :global(.sv-item--wrap) {\n    display: flex;\n    min-width: 0;\n  }\n  :global(.sv-item--wrap.in-selection) {\n    padding: var(--sv-selection-wrap-padding, 0px 3px 0px 4px);\n  }\n  :global(.sv-item--wrap.is-multi) {\n    padding: var(--sv-selection-multi-wrap-padding, 0px 3px 0px 6px);\n    background-color: var(--sv-item-selected-bg, #efefef);\n  }\n  :global(.sv-item--wrap.in-dropdown) {\n    padding: var(--sv-item-wrap-padding, 3px 3px 3px 6px);\n  }\n\n  :global(.sv-item--content) {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n\n  :global(.sv-item--btn) {\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    align-self: stretch;\n    padding: 0 4px;\n    box-sizing: border-box;\n    border-radius: calc(var(--sv-border-radius, 4px) / 2);\n    border-width: 0;\n    margin: 0;\n    cursor: pointer;\n    background-color: var(--sv-item-btn-bg, var(--sv-item-selected-bg, #efefef));\n  }\n\n\n  /** #region ************************************ buttons */\n  :global(.sv-item--btn > svg) {\n    fill: var(--sv-item-btn-color, var(--sv-icon-color, #bbb));\n  }\n  :global(.sv-item--btn:hover) {\n    background-color: var(--sv-item-btn-bg-hover, #ddd);\n  }\n  :global(.sv-item--btn:hover > svg) {\n    fill: var(--sv-item-btn-color-hover, #777);\n  }\n\n  .sv-buttons {\n    display: flex;\n    align-self: stretch;\n    position: relative;\n  }\n  .sv-btn-indicator {\n    color: var(--sv-icon-color, #bbb);\n    display: flex;\n    transition: color 150ms ease 0s;\n    box-sizing: border-box;\n    background-color: var(--sv-icon-bg, transparent);\n    border: var(--sv-btn-border, 0);\n    padding: 0;\n    margin: var(--sv-general-padding, 4px);\n    align-items: center;\n    fill: currentcolor;\n    line-height: 1;\n    stroke: currentcolor;\n    stroke-width: 0px;\n    &:hover {\n      color: var(--sv-icon-color-hover, #777);\n    }\n  }\n  .sv-btn-separator {\n    align-self: stretch;\n    background-color: var(--sv-separator-bg, #ccc);\n    margin-bottom: var(--sv-general-padding, 4px);\n    margin-top: var(--sv-general-padding, 4px);\n    width: 1px;\n    box-sizing: border-box;\n  }\n  .indicator-icon {\n    width: var(--sv-icon-size, 20px);\n    height: var(--sv-icon-size, 20px);\n  }\n  .is-loading:after {\n    animation: spinAround 0.5s infinite linear;\n    border: var(--sv-loader-border, 2px solid #ccc);\n    border-radius: 50%;\n    border-right-color: transparent;\n    border-top-color: transparent;\n    content: \"\";\n    display: block;\n    height: var(--sv-icon-size, 20px);\n    width: var(--sv-icon-size, 20px);\n    right: var(--sv-general-padding, 4px);\n    top: calc(50% - (var(--sv-icon-size, 20px) / 2));\n    position: absolute !important;\n    box-sizing: border-box;\n  }\n  @keyframes spinAround {\n    from {\n      transform: rotate(0deg)\n    }\n    to {\n      transform: rotate(359deg)\n    }\n  }\n\n  /** #endregion */\n\n  /** ************************************ dropdown */\n\n  .sv_dropdown {\n    margin: var(--sv-dropdown-offset, 1px) 0;\n    box-sizing: border-box;\n    position: absolute;\n    min-width: 100%;\n    width: var(--sv-dropdown-width, auto);\n    background-color: var(--sv-dropdown-bg, var(--sv-bg, #fff));\n    overflow-y: auto;\n    overflow-x: hidden;\n    border: var(--sv-dropdown-border, 1px solid rgba(0,0,0,0.15));\n    border-radius: var(--sv-border-radius, 4px);\n    box-shadow: var(--sv-dropdown-shadow, 0 6px 12px #0000002d);\n    opacity: 0;\n    z-index: -1000;\n    pointer-events: none;\n\n    &.is-open {\n      opacity: 1;\n      z-index: 2;\n      pointer-events: auto;\n    }\n  }\n  .sv-dropdown-scroll {\n    /* min-height: 40px; */\n    padding: 0;\n    box-sizing: border-box;\n    max-height: var(--sv-dropdown-height, 320px);\n    overflow-y: auto;\n    overflow-x: hidden;\n    &.has-items {\n      padding: 4px;\n    }\n  }\n  .in-dropdown.is-selected {\n    background-color: var(--sv-dropdown-selected-bg, #ECF3F9);\n  }\n  .in-dropdown.is-disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n  .in-dropdown.sv-dd-item-active,\n  .in-dropdown:hover,\n  .in-dropdown:active {\n    background-color: var(--sv-dropdown-active-bg, #F2F5F8);\n  }\n  .is-dropdown-row {\n    padding: var(--sv-general-padding, 4px);\n  }\n\n  /** ************************************ creatable */\n\n  .sv-dropdown-scroll.has-items + .is-dropdown-row {\n    border-top: 1px solid transparent;\n    border-color: var(--sv-separator-bg, #ccc);\n  }\n  .creatable-row {\n    width: 100%;\n    border: 0;\n    background-color: inherit;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-radius: calc(var(--sv-border-radius, 4px) / 2);\n    padding: var(--sv-item-wrap-padding, 3px 3px 3px 6px);\n\n    &:hover,\n    &:active,\n    &.active {\n      background-color: var(--sv-dropdown-active-bg, #F2F5F8);\n    }\n    &.active.is-disabled {\n      opacity: 0.5;\n      background-color: var(--sv-create-disabled-bg, #fcbaba);\n    }\n    &.is-disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n  }\n\n  /*\n   * moved selector to global due to https://github.com/sveltejs/svelte/issues/10143 -> https://github.com/sveltejs/svelte/pull/10208\n   */\n  .creatable-row :global(> .is-loading) {\n    position: relative;\n    &:after {\n      left: calc(100% + 4px);\n    }\n  }\n\n  .shortcut {\n    display: flex;\n    align-items: center;\n    align-content: center;\n  }\n  .shortcut > kbd {\n      border: var(--sv-create-kbd-border, 1px solid #efefef);\n      border-radius: var(--sv-border-radius, 4px);\n      padding: 0px 6px;\n      margin: -1px 0;\n      background-color: var(--sv-create-kbd-bg, #fff);\n  }\n\n  /** #region input */\n  .sv-input--sizer {\n    position: absolute;\n    pointer-events: none;\n    display: inline-grid;\n    vertical-align: top;\n    align-items: center;\n\n    &:after {\n      content: attr(data-value) ' ';\n      visibility: hidden;\n      white-space: pre-wrap;\n    }\n  }\n  .is-focused .sv-input--sizer {\n    position: relative;\n    pointer-events: all;\n  }\n  .has-items .keep-value:not(:focus) {\n    color: transparent;\n  }\n  /* moved selector to global due to https://github.com/sveltejs/svelte/issues/10143 -> https://github.com/sveltejs/svelte/pull/10208 */\n  .is-focused :global(.is-single.has-items.has-input > .sv-item--container) {\n    opacity: 0.2;\n  }\n  .sv-input--sizer:after,\n  .sv-input--text {\n    width: auto;\n    min-width: 1em;\n    grid-area: 1 / 2;\n    font: inherit;\n    padding: 0 0.25em;\n    margin: 0;\n    resize: none;\n    background: none;\n    appearance: none;\n    border: none;\n  }\n  .has-items .sv-input--text {\n    padding-left: 0;\n  }\n\n  .sv-input--text {\n    outline: none;\n    &::placeholder {\n      color: var(--sv-placeholder-color, #ccccd6);\n    }\n  }\n  /* #endregion */\n</style>\n","<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { \n    getParent, humanTime, humanCount, \n    formatBytes, getOptimalColors,\n  } from \"../ts/util\";\n  import { api } from \"../ts/api.svelte\";\n  import { API_URL, State } from \"../ts/store.svelte\";\n  import Svelecte, { addRenderer } from 'svelecte';\n\n  //#region state\n  let COLORS: string[] = []\n  let path = $state('/');\n  let fullPath = $state('/');\n  let folders = $state<FileItem[]>([]);\n  let files = $state<ScannedFile[]>([]);\n  let loading = $state(false);\n  let initializing = $state(false);\n  let progress_current = $state(0);\n  let progress_total = $state(0);\n  let progress_percent = $state(0);\n  let history = $state<string[]>(['/']);\n  let histIdx = $state(0);\n  type SortKey = \"disk\" | \"count\";\n  let sortBy = $state<SortKey>(\"disk\");\n  let sortOpen = $state(false);\n  let selectedUser = $state<string>(\"All Users\");\n  let users = $state<string[]>([]);\n  let userColors = $state(new Map<string, string>()); // cache: username -> color\n  let userDropdown = $state<{user:string;color:string}[]>([]);\n  let pathInput = $state();\n  let isEditing = $state(false);\n\n  //#endregion\n\n  //#region colors\n\n  function colorRenderer(item, _isSelection, _inputValue) {\n    const base = \"width:16px;height:16px;border:1px solid white;border-radius:3px;flex:none;\";\n    const a = COLORS[0];\n    const b = COLORS[1] ?? a;\n    const c = COLORS[2] ?? b;\n    const d = COLORS[3] ?? c;\n\n    const icon_bg =\n      item.user === \"All Users\"\n        ? `background: linear-gradient(90deg, ${a} 0%, ${b} 33%, ${c} 66%, ${d} 100%);`\n        : `background: ${item.color};`;\n    const user_css = !State.isAdmin ? \"text-gray-400\" : ''\n    return `<div class=\"flex gap-2 items-center\">\n                <div class=\"border border-gray-500 rounded\"\n                  style=\"${base}${icon_bg}\"></div>\n                <div class=\"${user_css}\">${item.user}</div>              \n              </div>`\n  }\n  addRenderer('color', colorRenderer);\n\n  // Seed colors for known users (optional)\n  function seedUserColors(usernames: string[]) {\n    usernames.forEach((uname, index) => {\n      if (!userColors.has(uname)) {\n        userColors.set(uname, COLORS[index % COLORS.length]);\n      }\n    })\n    userDropdown = Array.from(userColors.entries()).map(([user, color]) => ({user,color}))\n  }\n\n  // Deterministic color for any username (stable + cached)\n  function colorForUsername(uname: string): string {\n    const cached = userColors.get(uname);\n    if (cached) return cached;\n    let h = 0;\n    for (let i = 0; i < uname.length; i++) {\n      h = (h * 31 + uname.charCodeAt(i)) >>> 0;\n    }\n    const color = COLORS[h % COLORS.length];\n    userColors.set(uname, color);\n    return color;\n  }\n  //#endregion\n\n  //#region types\n  type Age = {\n    count: number;\n    disk: number;  // bytes\n    atime: number; // unix seconds\n    mtime: number; // unix seconds\n  }\n  type RawFolder = {\n    path: string;\n    // username -> \"0\"/\"1\"/\"2\" -> Age\n    users: Record<string, Record<string, Age>>;\n  }\n  type UserStatsJson = {\n    username: string;\n    count: number;\n    disk: number; // bytes\n    atime: number;\n    mtime: number;\n  }\n  type FileItem = {\n    path: string;\n    total_count: number;\n    total_disk: number; // bytes\n    accessed: number;   // unix time\n    modified: number;   // unix time\n    users: Record<string, UserStatsJson>; // keyed by username (aggregated across ages)\n  }\n  // Scanned file from /api/files\n  type ScannedFile = {\n    path: string;\n    size: number;      // bytes\n    accessed: number;  // unix\n    modified: number;  // unix\n    owner: string;     // username\n  }\n  //#endregion\n\n  //#region age filter\n  type AgeFilter = -1 | 0 | 1 | 2;\n  let ageFilter = $state<AgeFilter>(-1);\n  let ageOpen = $state(false);\n  const AGE_LABELS: Record<AgeFilter, string> = {\n    '-1': \"Any Time\",\n    0: \"Recent\",\n    1: \"Not too old\",\n    2: \"Old files\",\n  }\n\n  function displayAgeLabel(a: AgeFilter) { \n    return AGE_LABELS[a]; \n  }\n\n  function chooseAge(a: AgeFilter) {\n    ageFilter = a;\n    ageOpen = false;\n    refresh();\n  }\n  //#endregion\n\n  //#region tooltip\n  type Tip = {\n    show: boolean;\n    x: number;\n    y: number;\n    username?: string;\n    value?: string;\n    percent?: number;\n  }\n  let tip = $state<Tip>({ show: false, x: 0, y: 0 });\n\n  let bubbleEl: HTMLDivElement | null = $state(null);\n  const MARGIN = 8;\n  const ARROW_GAP = 10;\n\n  function clampToViewport(rawX: number, rawY: number) {\n    const ww = window.innerWidth;\n    const wh = window.innerHeight;\n\n    const w = bubbleEl?.offsetWidth ?? 200;\n    const h = bubbleEl?.offsetHeight ?? 60;\n\n    const halfW = w / 2;\n\n    const minX = MARGIN + halfW;\n    const maxX = ww - MARGIN - halfW;\n\n    const minY = MARGIN + h + ARROW_GAP;\n    const maxY = wh - MARGIN;\n\n    return {\n      x: Math.min(maxX, Math.max(minX, rawX)),\n      y: Math.min(maxY, Math.max(minY, rawY)),\n    };\n  }\n\n  function showTip(e: MouseEvent, userData: UserStatsJson, percent: number) {\n    cancelHide(); // keep it open while interacting\n    const { x, y } = clampToViewport(e.clientX, e.clientY);\n    tip = {\n      show: true,\n      x,\n      y,\n      username: userData.username,\n      value: rightValueForUser(userData),\n      percent: Math.round(percent * 10) / 10,\n    };\n  }\n  function moveTip(e: MouseEvent) {\n    if (!tip.show) return;\n    cancelHide(); // moving over the target keeps it alive\n    const { x, y } = clampToViewport(e.clientX, e.clientY);\n    tip = { ...tip, x, y };\n  }\n  function hideTip() {\n    cancelHide();\n    tip = { show: false, x: 0, y: 0 };\n  }\n\n  const HIDE_DELAY = 1200; // ms â€” tweak to taste\n  let hideTimer: number | null = $state(null);\n\n  function scheduleHide(ms = HIDE_DELAY) {\n    if (hideTimer) clearTimeout(hideTimer);\n    hideTimer = window.setTimeout(() => {\n      tip = { show: false, x: 0, y: 0 };\n      hideTimer = null;\n    }, ms);\n  }\n\n  function cancelHide() {\n    if (hideTimer) {\n      clearTimeout(hideTimer);\n      hideTimer = null;\n    }\n  }\n  //#endregion\n\n  //#region folders and files bars\n\n  function transformFolders(raw: RawFolder[], filter: AgeFilter): FileItem[] {\n    // Ages to include\n    const ages: string[] = filter === -1 ? [\"0\",\"1\",\"2\"] : [String(filter)];\n\n    return (raw ?? [])\n      .map((rf) => {\n        const usersAgg: Record<string, UserStatsJson> = {};\n        let total_count = 0;\n        let total_disk  = 0;\n        let max_atime   = 0;\n        let max_mtime   = 0;\n\n        const userEntries = Object.entries(rf.users ?? {});\n        for (const [uname, agesMap] of userEntries) {\n          let u_count = 0, u_disk = 0, u_atime = 0, u_mtime = 0;\n\n          for (const a of ages) {\n            const s = agesMap?.[a];\n            if (!s) \n              continue;\n            // coerce defensively\n            const c = Number(s.count ?? 0);\n            const dk = Number(s.disk ?? 0);\n            const at = Number(s.mtime ?? 0);\n            const mt = Number(s.mtime ?? 0);\n\n            u_count += Number.isFinite(c) ? c : 0;\n            u_disk  += Number.isFinite(dk) ? dk : 0;\n            if (Number.isFinite(at) && at > u_atime) \n              u_atime = at;\n            if (Number.isFinite(mt) && mt > u_mtime) \n              u_mtime = mt;\n          }\n\n          if (u_count || u_disk) {\n            usersAgg[uname] = {\n              username: uname,\n              count: u_count,\n              disk:  u_disk,\n              atime: u_atime,\n              mtime: u_mtime,\n            };\n            total_count += u_count;\n            total_disk  += u_disk;\n            if (u_atime > max_atime) \n              max_atime = u_atime;\n            if (u_mtime > max_mtime) \n              max_mtime = u_mtime;\n          }\n        }\n\n        return {\n          path: rf.path,\n          total_count,\n          total_disk,\n          accessed: max_atime,\n          modified: max_mtime,\n          users: usersAgg,\n        };\n      })\n      // hide folders with no data after filter\n      .filter(f => Object.keys(f.users).length > 0);\n  }\n  const toNum = (v: any) => {\n    const n = Number(v);\n    return Number.isFinite(n) ? n : 0;\n  }\n  // ---------- Sorting (Folders) ----------\n  const sortedFolders = $derived.by(() => {\n    const key = sortBy;\n    const arr = folders ? [...folders] : [];\n    return arr.sort((a: any, b: any) => {\n      let aVal, bVal;\n      switch (key) {\n        case \"disk\":\n          aVal = toNum(a?.total_disk);\n          bVal = toNum(b?.total_disk);\n          break;\n        case \"count\":\n          aVal = toNum(a?.total_count);\n          bVal = toNum(b?.total_count);\n          break;\n      }\n      return bVal - aVal;\n    });\n  })\n  // Folder progress bar max\n  let maxMetric = $derived.by(() => {\n    const key = sortBy;\n    const vals =\n      folders?.map((f) => {\n        switch (key) {\n          case \"disk\":\n            return toNum(f?.total_disk);\n          case \"count\":\n            return toNum(f?.total_count);\n        }\n      }) ?? [];\n    const max = Math.max(0, ...vals);\n    return max > 0 ? max : 1;\n  })\n  const pct = (n: any) => {\n    const x = toNum(n);\n    const p = (x / maxMetric) * 100;\n    const clamped = Math.max(0, Math.min(100, p));\n    return Math.round(clamped * 10) / 10;\n  }\n  const displaySortBy = (key: string) => {\n    switch (key) {\n      case \"disk\":\n        return 'Disk Usage'\n      case \"count\":\n        return 'Total Files'\n      default:\n        return 'Disk Usage'\n    }\n  }\n  function clickOutside(\n    node: HTMLElement,\n    cb: (() => void) | { close: () => void }\n  ) {\n    let close: (() => void) | undefined =\n      typeof cb === \"function\" ? cb : cb?.close;\n\n    const onPointerDown = (e: PointerEvent) => {\n      if (!node.contains(e.target as Node)) close?.();\n    };\n\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" || e.key === \"Esc\") close?.();\n    };\n\n    document.addEventListener(\"pointerdown\", onPointerDown, true);\n    document.addEventListener(\"keydown\", onKeyDown, true);\n\n    return {\n      update(next: typeof cb) {\n        close = typeof next === \"function\" ? next : next?.close;\n      },\n      destroy() {\n        document.removeEventListener(\"pointerdown\", onPointerDown, true);\n        document.removeEventListener(\"keydown\", onKeyDown, true);\n      },\n    };\n  }\n  const metricValue = (file: FileItem) => {\n    switch (sortBy) {\n      case \"disk\":\n        return toNum(file?.total_disk);\n      case \"count\":\n        return toNum(file?.total_count);\n    }\n  }\n  // Right label (folders) â€“ sizes already in BYTES\n  function rightValue(file: FileItem) {\n    switch (sortBy) {\n      case \"disk\":\n        return formatBytes(toNum(file?.total_disk));\n      case \"count\":\n        return toNum(file?.total_count).toLocaleString();\n    }\n  }\n  // Per-user right label â€“ sizes already in BYTES\n  function rightValueForUser(userData: UserStatsJson) {\n    switch (sortBy) {\n      case \"disk\":\n        return formatBytes(toNum(userData?.disk));\n      case \"count\":\n        return toNum(userData?.count).toLocaleString();\n    }\n  }\n  const userMetricFor = (ud: UserStatsJson) => sortBy === \"disk\" ? Number(ud.disk) : Number(ud.count);\n  function sortedUserEntries(file: FileItem) {\n    return Object.entries(file?.users ?? {}).sort(([, a], [, b]) => userMetricFor(a) - userMetricFor(b));\n  }\n\n  function aggregatePathTotals(foldersArr: FileItem[], filesArr: ScannedFile[], p: string): FileItem {\n    let total_count = 0;\n    let total_disk = 0;\n    let accessed = 0; \n    let modified = 0; \n    const aggUsers: Record<string, UserStatsJson> = {};\n\n    // Aggregate folders (existing logic)\n    for (const f of foldersArr ?? []) {\n      total_count += toNum(f?.total_count);\n      total_disk  += toNum(f?.total_disk);\n      if (f.accessed > accessed) \n        accessed = f.accessed;\n      if (f.modified > modified) \n        modified = f.modified;\n      \n      const u = f?.users ?? {};\n      for (const [uname, data] of Object.entries(u)) {\n        const d = data as UserStatsJson;\n        const prev = aggUsers[uname] ?? { \n          username: uname, count: 0, disk: 0, atime: 0, mtime: 0 };\n        aggUsers[uname] = {\n          username: uname,\n          count: prev.count + toNum(d.count),\n          disk:  prev.disk  + toNum(d.disk),\n          atime: Math.max(prev.atime, toNum(d.atime)),\n          mtime: Math.max(prev.mtime, toNum(d.mtime)),\n        };\n      }\n    }\n\n    // Aggregate files (new logic)\n    for (const file of filesArr ?? []) {\n      total_count += 1;  // Each file counts as 1\n      total_disk += toNum(file?.size);\n      if (file.accessed > accessed) \n        accessed = file.accessed;\n      if (file.modified > modified) \n        modified = file.modified;\n      \n      // Aggregate user stats for this file\n      const owner = file.owner;\n      if (owner) {\n        const prev = aggUsers[owner] ?? { \n          username: owner, count: 0, disk: 0, atime: 0, mtime: 0 };\n        aggUsers[owner] = {\n          username: owner,\n          count: prev.count + 1,\n          disk: prev.disk + toNum(file.size),\n          atime: Math.max(prev.atime, toNum(file.accessed)),\n          mtime: Math.max(prev.mtime, toNum(file.modified)),\n        };\n      }\n    }\n\n    return {\n      path: p,\n      total_count,\n      total_disk,\n      accessed,\n      modified,\n      users: aggUsers,\n    };\n  }\n\n  const pathTotals = $derived.by(() => aggregatePathTotals(folders, files, path));\n  // ---------- Sorting (Files) ----------\n  function fileMetricValue(f: ScannedFile) {\n    switch (sortBy) {\n      case \"disk\":\n        return toNum(f.size); // bytes\n      case \"count\":\n        return 1;\n    }\n  }\n  const sortedfiles = $derived.by(() => {\n    const arr = files ? [...files] : [];\n    return arr.sort((a, b) => fileMetricValue(b) - fileMetricValue(a));\n  });\n  const maxFileMetric = $derived.by(() => {\n    // Use the parent folder's total as the maximum for file bars\n    const parentTotal = sortBy === \"disk\" ? pathTotals.total_disk : pathTotals.total_count;\n    return parentTotal > 0 ? parentTotal : 1;\n  });\n  const filePct = (f: ScannedFile) => Math.round((fileMetricValue(f) / maxFileMetric) * 1000) / 10;\n  function rightValueFile(f: ScannedFile) {\n    switch (sortBy) {\n      case \"disk\":\n        return formatBytes(toNum(f.size)); // bytes\n      case \"count\":\n        return \"1\";\n    }\n  }\n  //#endregion\n\n  //#region fetch data\n  // single-flight fetch\n  function createDoItAgain<T extends any[]>(fn: (...args: T) => Promise<void>) {\n    let running = false;\n    let nextArgs: T | null = null;\n    return async (...args: T) => {\n      nextArgs = args;\n      if (running) return;\n      running = true;\n      try {\n        while (nextArgs) {\n          const argsNow = nextArgs;\n          nextArgs = null;\n          await fn(...(argsNow as T));\n        }\n      } finally {\n        running = false;\n      }\n    };\n  }\n  const fetchFolders = createDoItAgain(async (_p: string) => {\n    loading = true;\n    try {\n      const userFilter: string[] = selectedUser === 'All Users' ? [] : [selectedUser];\n\n      // Pass age filter to both endpoints\n      const raw: RawFolder[] = await api.getFolders(_p, userFilter, ageFilter);\n      folders = transformFolders(raw, ageFilter);\n\n      files = await api.getFiles(_p, userFilter, ageFilter);\n      if (users && users.length > 0) seedUserColors(users);\n    } finally {\n      loading = false;\n    }\n  })\n  //#endregion\n\n  //#region menus\n\n  function pushHistory(p: string) {\n    if (history[histIdx] === p) return;\n    history = history.slice(0, histIdx + 1);\n    history.push(p);\n    histIdx = history.length - 1;\n  }\n  function chooseSort(key: SortKey) {\n    sortBy = key;\n    sortOpen = false;\n  }\n  function navigateTo(p) {\n    setPath(p);\n    pushHistory(fullPath || path);\n    fetchFolders(fullPath || path);\n  }\n  function refresh() {\n    fetchFolders(fullPath || path);\n  }\n  function goHome() {\n    navigateTo('/');\n  }\n  function goUp() {\n    const parent = getParent(fullPath || path);\n    navigateTo(parent);\n  }\n  function goBack() {\n    if (histIdx > 0) {\n      histIdx -= 1;\n      setPath(history[histIdx]);\n      fetchFolders(history[histIdx]);\n    }\n  }\n  function goForward() {\n    if (histIdx < history.length - 1) {\n      histIdx += 1;\n      setPath(history[histIdx]);\n      fetchFolders(history[histIdx]);\n    }\n  }\n  function onUserChanged() {\n    if (!selectedUser || selectedUser===null) {\n      selectedUser = 'All Users'\n      //svelecteRef?.close();\n    }\n    refresh()\n  }\n\n  //#endregion\n\n  //#region path\n\n\tlet copyFeedbackVisible = $state(false);\n\n  function setPath(newPath) {\n    const displayedPath = displayPath(newPath);\n    fullPath = displayedPath;\n\n    if (!isEditing) {\n      path = truncatePathFromStart(displayedPath);\n    } else {\n      path = displayedPath;\n    }\n  }\n  // Function to truncate path from the beginning\n  function truncatePathFromStart(inputPath, maxLength = 50) {\n    if (!inputPath || inputPath.length <= maxLength) return inputPath;\n\n    const parts = inputPath.split('/');\n    let result = parts[parts.length - 1]; // Start with filename\n\n    // Add directories from the end until we approach maxLength\n    for (let i = parts.length - 2; i >= 0; i--) {\n      const potential = parts[i] + '/' + result;\n      if (('...' + potential).length > maxLength) break;\n      result = potential;\n    }\n\n    return '...' + result;\n  }\n  function onPathFocus() {\n    isEditing = true;\n    if (fullPath) {\n      path = fullPath;\n    }\n  }\n  function onPathBlur() {\n    isEditing = false;\n    if (path && !path.startsWith('...')) {\n      fullPath = path;\n    }\n    if (fullPath) {\n      path = truncatePathFromStart(fullPath);\n    }\n  }\n  function displayPath(p: string): string {\n    if (!p) return \"/\";\n    let s = p.replace(/\\\\/g, \"/\");\n    if (s !== \"/\") s = s.replace(/\\/+$/, \"\");\n    if (!s.startsWith(\"/\")) s = \"/\" + s;\n    return s || \"/\";\n  }\n  function onPathKeydown(e: KeyboardEvent) {\n    if (e.key === \"Enter\") {\n      navigateTo(fullPath || path);\n    }\n  }\n\n  // Function to copy text from input/textarea\n\tasync function copyText(e) {\n    let element = e.currentTarget\n    try {\n      const textToCopy = element.value !== undefined \n      ? element.value \n      : (element.textContent || element.innerText || '')\n      await navigator.clipboard.writeText(textToCopy)\n      showCopyFeedback()\n    } catch (err) {\n      console.error('Copy failed:', err);\n    }\n\t}\n\n\t// Show copy feedback notification\n\tfunction showCopyFeedback() {\n\t\tcopyFeedbackVisible = true;\n\t\tsetTimeout(() => {\n\t\t\tcopyFeedbackVisible = false;\n\t\t}, 2000);\n\t}\n\n  //#endregion\n\n  onMount(async () => {\n    console.log(\"api url:\", API_URL)\n    users = await api.getUsers()\n    COLORS = getOptimalColors(users.length)\n    users.splice(0,0,\"All Users\")\n    if (State.isAdmin) {\n      selectedUser = 'All Users'\n    } else {\n      selectedUser = State.username\n    }\n    seedUserColors(users);\n    fullPath = path;\n    path = truncatePathFromStart(path);\n    refresh();\n  })\n  \n</script>\n\n<div class=\"flex flex-col h-screen min-h-0 gap-2 p-2\">\n  <div class=\"flex gap-2 items-center relative select-none\">\n    <button class=\"btn\" onclick={goHome} title=\"Go to Root Folder\" disabled={histIdx === 0 || fullPath === '/'}>\n      <div class=\"flex items-center\">\n      <span class=\"material-symbols-outlined\">home</span>\n      </div>\n    </button>\n    <button class=\"btn\" onclick={goBack} title=\"Go Back\" disabled={histIdx === 0}>\n      <div class=\"flex items-center\">\n      <span class=\"material-symbols-outlined\">arrow_back</span>\n      </div>\n    </button>\n    <button class=\"btn\" onclick={goForward} title=\"Go Forward\" disabled={histIdx >= history.length - 1}>\n      <div class=\"flex items-center\">\n      <span class=\"material-symbols-outlined\">arrow_forward</span>\n      </div>\n    </button>\n    <button class=\"btn\" onclick={goUp} title=\"Go Up\" disabled={getParent(path) === path}>\n      <div class=\"flex items-center\">\n      <span class=\"material-symbols-outlined\">arrow_upward</span>\n      </div>\n    </button>\n\n    <!-- Sort dropdown -->\n    <div class=\"relative\" use:clickOutside={() => (sortOpen = false)}>\n      <button class=\"btn w-36\" onclick={() => (sortOpen = !sortOpen)}>\n        <div class=\"flex items-center gap-2\">\n          <span class=\"material-symbols-outlined\">sort</span>\n          {displaySortBy(sortBy)}\n        </div>\n      </button>\n      {#if sortOpen}\n        <div\n          class=\"flex flex-col divide-y divide-gray-500 absolute w-36 rounded border\n           border-gray-500 bg-gray-800 shadow-lg z-20 overflow-hidden mt-0.5\"\n        >\n          <button class=\"w-full text-left px-3 py-2 hover:bg-gray-700 text-nowrap\" onclick={() => chooseSort(\"disk\")}>\n            By Disk Usage\n          </button>\n          <button class=\"w-full text-left px-3 py-2 hover:bg-gray-700\" onclick={() => chooseSort(\"count\")}>\n            By Total Files\n          </button>\n        </div>\n      {/if}\n    </div>\n\n    <!-- Age filter dropdown -->\n    <div class=\"relative\"  use:clickOutside={() => (ageOpen = false)}>\n      <button class=\"btn w-36\" onclick={() => (ageOpen = !ageOpen)}>\n        <div class=\"flex items-center gap-2\">\n          <span class=\"material-symbols-outlined\">schedule</span>\n          {displayAgeLabel(ageFilter)}\n        </div>\n      </button>\n      {#if ageOpen}\n        <div\n          class=\"flex flex-col divide-y divide-gray-500 absolute w-48 rounded border\n           border-gray-500 bg-gray-800 shadow-lg z-20 overflow-hidden mt-0.5\"\n        >\n          <button class=\"w-full text-left px-3 py-2 hover:bg-gray-700\" onclick={() => chooseAge(-1)}>\n            Any Time\n          </button>\n          <button class=\"w-full text-left px-3 py-2 hover:bg-gray-700\" onclick={() => chooseAge(0)}>\n            Recent (2 months)\n          </button>\n          <button class=\"w-full text-left px-3 py-2 hover:bg-gray-700\" onclick={() => chooseAge(1)}>\n            Not too old (2 years)\n          </button>\n          <button class=\"w-full text-left px-3 py-2 hover:bg-gray-700\" onclick={() => chooseAge(2)}>\n            Old files\n          </button>\n        </div>\n      {/if}\n    </div>\n\n    <Svelecte\n      disabled={!State.isAdmin}\n      bind:value={selectedUser} \n      options={userDropdown}\n      valueField=\"user\" \n      renderer=\"color\"\n      highlightFirstItem={false}\n      onChange={onUserChanged}\n      closeAfterSelect={true}\n      deselectMode=\"native\"\n      virtualList={true}\n      class=\"z-20 min-w-40 h-10 border rounded\n       border-gray-500 bg-gray-800 text-white\"\n    />\n  </div>\n  <div class=\"flex\">\n    <input \n      bind:this={pathInput}\n      bind:value={path} placeholder=\"Path...\" \n      class=\"w-full truncate text-left cursor-pointer\"\n      onkeydown={onPathKeydown} \n      onblur={onPathBlur}\n      onfocus={onPathFocus}\n      onclick={(e)=>copyText(e)}\n      autocorrect=\"off\" \n      spellcheck=\"false\"\n      autocomplete=\"off\"\n      autocapitalize=\"none\"\n      disabled={loading} />\n  </div>\n  \n  <!-- Path total header item -->\n  <div class=\"\">\n    <div class=\"relative px-2 bg-gray-700 border border-gray-500 rounded overflow-hidden\">\n      <!-- Total bar background -->\n      <div class=\"absolute left-0 top-0 bottom-0 flex z-0\" style=\"width: 100%\">\n        {#each sortedUserEntries(pathTotals) as [uname, userData] (uname)}\n          {@const userMetric = sortBy === \"disk\" ? userData.disk : userData.count}\n          {@const totalMetric =\n            sortBy === \"disk\" ? pathTotals.total_disk :  pathTotals.total_count}\n          {@const userPercent = totalMetric > 0 ? (userMetric / totalMetric) * 100 : 0}\n          <!-- svelte-ignore a11y_no_static_element_interactions -->\n          <div\n            class=\"h-full transition-all duration-300 min-w-[0.5px] hover:opacity-90\"\n            style=\"width: {userPercent}%; background-color: {colorForUsername(uname)};\"\n            onmouseenter={(e) => showTip(e, userData, userPercent)}\n            onmousemove={moveTip}\n            onmouseleave={hideTip}\n            aria-label={`${userData.username}: ${rightValueForUser(userData)}`}\n          ></div>\n        {/each}\n      </div>\n      <!-- Total bar foreground -->\n      <div class=\"relative z-10 p-1 pointer-events-none\">        \n        <!-- <div class=\"\" ondblclick={copyPath} role=\"textbox\">{path}</div> -->\n        <div class=\"flex items-center justify-end\">\n          <p class=\"\">\n            {humanCount(pathTotals.total_count)} Files \n            â€¢ Changed {humanTime(pathTotals.modified)} \n            â€¢ {formatBytes(pathTotals.total_disk)}                  \n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  {#if initializing}\n    <div class=\"flex flex-col w-full h-full items-center justify-between font-mono\">\n      <div class=\"w-full bg-gray-700 rounded-full h-1\">\n        <div class=\"bg-orange-500 h-1 rounded-full transition-all duration-300\" style=\"width: {progress_percent}%\"></div>\n      </div>\n      <div class=\"flex flex-col justify-center grow items-center w-64\">\n        <div class=\"flex w-full justify-between\">\n          <div>Progress:</div>\n          <div>{progress_percent}%</div>\n        </div>\n        <div class=\"flex w-full justify-between\">\n          <div>Loaded folders:</div>\n          <div>{progress_current}</div>\n        </div>\n        <div class=\"flex w-full justify-between\">\n          <div>Total:</div>\n          <div>{progress_total}</div>\n        </div>\n      </div>\n    </div>\n  {:else if loading}\n    <!-- Skeleton Loader (UI stays interactive) -->\n    <div class=\"flex flex-col gap-2 overflow-y-auto\">\n      {#each Array(6) as _, i}\n        <div class=\"relative p-3 bg-gray-800 border border-gray-500 rounded-lg animate-pulse min-h-16 h-16\">\n          <div class=\"flex items-center justify-between gap-4\">\n            <div class=\"h-4 bg-gray-700 rounded w-3/4\"></div>\n            <div class=\"h-3 bg-gray-700 rounded w-12\"></div>\n          </div>\n          <div class=\"flex gap-2 mt-2\">\n            <div class=\"h-3 bg-gray-700 rounded w-16\"></div>\n            <div class=\"h-3 bg-gray-700 rounded w-20\"></div>\n            <div class=\"h-3 bg-gray-700 rounded w-24\"></div>\n          </div>\n        </div>\n      {/each}\n    </div>\n  {:else}\n    <div class=\"flex flex-col gap-2 overflow-y-auto transition-opacity duration-200 p-4\">\n      <!-- Folders -->\n      {#each sortedFolders as folder}\n        <!-- svelte-ignore a11y_click_events_have_key_events -->\n        <!-- svelte-ignore a11y_no_static_element_interactions -->\n        <div\n          class=\"relative px-2 py-1 cursor-pointer hover:opacity-95 bg-gray-700 border border-gray-500 rounded-lg overflow-hidden min-h-16\"\n          onclick={() => navigateTo(folder.path)}\n        >\n          <!-- Folder bar background -->\n          <div class=\"absolute left-0 top-0 bottom-0 flex z-0\" style=\"width: {pct(metricValue(folder))}%\">\n            {#each sortedUserEntries(folder) as [uname, userData]}\n              {@const userMetric = sortBy === \"disk\" ? userData.disk : userData.count}\n              {@const totalMetric =\n                sortBy === \"disk\" ? folder.total_disk :folder.total_count}\n              {@const userPercent = totalMetric > 0 ? (userMetric / totalMetric) * 100 : 0}\n              <div\n                class=\"h-full transition-all duration-300 min-w-[0.5px] hover:opacity-90\"\n                style=\"width: {userPercent}%; background-color: {colorForUsername(uname)};\"\n                onmouseenter={(e) => showTip(e, userData, userPercent)}\n                onmousemove={moveTip}\n                onmouseleave={hideTip}\n                aria-label={`${userData.username}: ${rightValueForUser(userData)}`}\n              ></div>\n            {/each}\n          </div>\n          <!-- Folder bar foreground -->\n          <div class=\"relative flex flex-col gap-2 z-10 pointer-events-none\">\n            <div class=\"flex items-center justify-between gap-4\">\n              <div class=\"w-full overflow-hidden text-ellipsis whitespace-nowrap\">\n                <div>{folder.path}</div>\n              </div>\n              <span class=\"text-nowrap font-bold\">{rightValue(folder)}</span>\n            </div>\n            <div class=\"flex justify-end\">\n              <p class=\"text-sm\">\n                {humanCount(folder.total_count)} Files \n                â€¢ Updated {humanTime(folder.modified)} \n                {#if humanTime(folder.accessed) > humanTime(folder.modified)}\n                â€¢ Last file read {humanTime(folder.accessed)} \n                {/if}                      \n              </p>\n            </div>\n          </div>\n        </div>\n      {/each}\n\n      <!-- Files (after folders) -->\n      {#each sortedfiles as f}\n        {@const color = colorForUsername(f.owner)}\n        <!-- svelte-ignore a11y_no_static_element_interactions -->\n        <div class=\"flex\">\n          <span class=\"material-symbols-outlined text-4xl\">subdirectory_arrow_right</span>\n          <div class=\"relative flex grow px-2 py-1 bg-gray-700 border border-gray-500 rounded overflow-hidden text-xs\">\n            <div class=\"flex flex-col w-full\">\n              <!-- File bar background -->\n              <div class=\"absolute left-0 top-0 bottom-0 z-0 opacity-60\" \n                style=\"width: {filePct(f)}%; background-color: {color};\">\n              </div>\n              <div class=\"relative z-10 flex items-center justify-between gap-2\">\n                <div class=\"w-full overflow-hidden\">\n                  <!-- svelte-ignore a11y_click_events_have_key_events -->\n                  <span class=\"cursor-pointer text-ellipsis text-nowrap\"\n                    onclick={(e)=>copyText(e)}>\n                    {f.path}\n                  </span>                  \n                </div>\n                <div class=\"flex items-center gap-4 text-sm font-semibold text-nowrap\">\n                  {rightValueFile(f)}\n                </div>\n              </div>\n              <div class=\"relative z-10 flex justify-between\">\n                <div class=\"\">{f.owner}</div>\n                <div class=\"\">\n                  Updated {humanTime(f.modified)} â€¢ Read {humanTime(f.accessed)}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      {/each}\n    </div>\n  {/if}\n  <div class=\"grow\"></div>\n</div>\n\n<!-- Tooltip -->\n{#if tip.show}\n  <div\n    class=\"fixed z-50 pointer-events-none\"\n    style=\"\n      left: {tip.x}px;\n      top: {tip.y}px;\n      transform: translate(-50%, calc(-100% - 10px));\n    \"\n  >\n    <div\n      bind:this={bubbleEl}\n      class=\"relative rounded-xl border border-white/10 bg-black/90 text-white shadow-xl px-3 py-2\"\n    >\n      <div class=\"flex items-center justify-center\">\n        <div class=\"font-medium text-sm truncate max-w-[180px]\">{tip.username}</div>        \n      </div>\n      <div class=\"flex gap-2 items-center justify-between text-xs opacity-90\">\n        <div class=\"text-nowrap\">{tip.value}</div>\n        <div class=\"\">{tip.percent}%</div>\n      </div>\n      <div class=\"absolute left-1/2 top-full -translate-x-1/2 mt-[-4px]\">\n        <div class=\"w-2 h-2 rotate-45 bg-black/90 border border-white/10 border-l-0 border-t-0\"></div>\n      </div>\n    </div>\n  </div>\n{/if}\n\n<!-- Feedback notification -->\n{#if copyFeedbackVisible}\n  <div \n    class=\"fixed top-1 inset-x-0 mx-auto w-max bg-emerald-600 text-white px-4 py-1 \n      rounded-lg font-medium shadow-lg z-50 transform transition-transform duration-300 \n      ease-[cubic-bezier(0.68,-0.55,0.265,1.55)]\"\n    class:translate-x-full={!copyFeedbackVisible}\n    class:translate-x-0={copyFeedbackVisible}\n  >\n    Path copied!\n  </div>\n{/if}"],"names":["empty","snapshot","value","skip_warning","no_tojson","clone","cloned","path","paths","original","unwrapped","is_array","copy","i","element","get_prototype_of","object_prototype","key","html","node","get_value","svg","mathml","anchor","template_effect","effect","active_effect","hydrating","hydrate_next","remove_effect_dom","hydrate_node","next","last","COMMENT_NODE","get_next_sibling","w.hydration_mismatch","HYDRATION_ERROR","assign_nodes","set_hydrate_node","create_fragment_from_html","get_first_child","action","dom","payload","untrack","inited","prev","render_effect","deep_read_state","safe_not_equal","set_class","is_html","hash","prev_classes","next_classes","next_class_name","to_class","is_present","instanceOfAny","object","constructors","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","transactionDoneMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","resolve","reject","unlisten","success","error","wrap","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","replaceTraps","callback","wrapFunction","func","args","unwrap","transformCachableValue","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","openPromise","event","db","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","method","storeName","oldTraps","advanceMethodProps","methodMap","advanceResults","ittrProxiedCursorToOriginalProxy","cursorIteratorTraps","cachedFunc","iterate","cursor","proxiedCursor","isIteratorProp","DB_NAME","STORE_NAME","DB_VERSION","EXPIRATION_MS","getDB","setCache","data","getCache","entry","Api","__publicField","API_URL","endpoint","body","use_cache","options","State","url","response","err","users","age","pathParam","userParam","ageParam","api","settings","opts","opt","labelField","count","num","minQuery","inputLength","debounce","fn","delay","timeout","requestFactory","query","parentValue","initial","fetchProps","fetchUrl","arr","controller","props","Sifter","items","respect_word_boundary","start_only","trim","n","regex","letter","tokens","words","escape_regex","DIACRITICS","iterator","search","self","fields","token_count","nesting","scoreValue","token","score","pos","scoreObject","field_count","getattr","sum","field","fields_count","multiplier","multipliers","get_field","implicit_score","sort","result","a","b","cmp","extend","option_fields","option_sort","option_sort_empty","fn_sort","fn_score","item","id","asciifold","k","obj","names","str","chunk","foreignletters","lookup","regexp","foreignletter","itemHtml","highlightSearch","renderInSelection","inputValue","itemRenderer","disableHighlight","itemHtmlText","pattern","w","e","pat","highlight","skip","folded","spannode","middlebit","middleclone","android","onCreate_helper","enteredValue","ch","escapeHtml","cubicOut","t","f","flip","from","to","params","duration","d","easing","style","transform","ox","oy","zoom","get_zoom","sx","sy","fx","fy","ty","dx","dy","dsx","dsy","u","x","y","current","pixelGetter","styles","unit","floatValue","el","isOutOfViewport","elem","parentBounding","bounding","out","positionDropdown","isOpened","scrollContainer","renderDropdown","outVp","scrollIntoView","container","virtualList","center","dropdownIndex","focusedEl","focusedRect","menuRect","overScroll","centerOffset","createConfig","valueField","optLabel","optItems","initSelection","initialValue","valueAsObject","initialValue_array","res","ensureObjectArray","arrayValue","flatList","config","flatOpts","_opt","updateOptionProps","getFilterProps","exclude","filterList","excludeSelected","searchProps","idx","sifter","conjunction","word","createSifterSortField","lastPos","prevItems","fieldInit","type","groupItemsField","isValue","val","firstItem","autoAddItem","guessList","bindItem","selectedObject","itemHeight","resolveItemSize","$.get","ref_contents","prev_itemCount","$$props","prev_scrollToIndex","currentOffset","start","end","top","viewport_height","ref_viewport","itemSize","visibleItems","$.derived","updateScrollIndex","index","maxOffset","minOffset","totalSize","idealOffset","refresh","itemsCount","$.set","tick","handle_scroll","scrollTop","old_start","expected_height","actual_height","onMount","onDestroy","$.user_effect","$.each","svelecte_list_content","row","$.snippet","$.noop","$.bind_this","$$value","svelecte_list_viewport","$.set_style","snippet_collapsedSelection","$$anchor","selectedOptions","i18n","$.template_effect","$0","$.set_text","text","_dropdownShow","defaults","stringFormatters","_noop","_node","addRenderer","rendererFn","on_mouse_down","on_input","__1","multiple","bindItemAction","currentValueField","i18n_actual","currentLabelField","$$render","consequent","$.animation","div","flipDurationMs","snippet_clearIcon","_selectedOptions","_inputValue","consequent_1","snippet_option","isCreating","meta_key","inputId","required","disabled","$.prop","groupLabelField","disabledField","placeholder","searchable","clearable","highlightFirstItem","selectOnTab","resetOnBlur","resetOnSelect","closeAfterSelect","deselectMode","dndzone","strictMode","max","collapseSelection","keepSelectionInList","creatable","creatablePrefix","allowEditing","keepCreated","delimiter","fetch","fetchMode","fetchCallback","fetchResetOnBlur","fetchDebounceTime","lazyDropdown","vlItemSize","className","readSelection","emitValues","onChange","_readSelection","onFocus","_htmlInput","onBlur","onCreateOption","_newObj","onCreateFail","_fail","onEnterKey","_event","onFetch","_data","onFetchError","_err","onInvalidValue","_val","prepend","collapsedSelection","selection","snippet_selection","clearIcon","toggleIcon","snippet_toggleIcon","append","listHeader","option","createRow","snippet_createRow","positionResolver","anchor_element","controlClass","dropdownClass","optionClass","focus","ref_input","setSelection","triggerChangeEvent","watch_value_change","emitChangeEvent","getSelection","onlyValues","compute_selection","refetchWith","fetch_runner","DOM_ID","is_mounted","options_stopgap","prev_value","prev_parent_value","init_only_options","$.state","$.proxy","itemConfig","prev_options","options_flat_override","options_flat","selectedKeys","set","alreadyCreated","is_focused","focus_by_mouse","is_tainted","is_dropdown_opened","dropdown_show","dropdown_index","render_dropdown","dropdown_scroller","input_value","disable_key_event_bubble","fetch_initOnly","fetch_initValue","$.snapshot","isIOS","doCollapse","isFetchingData","is_dragging","is_fetch_dependent","ref_select_element","ref_container","ref_container_scroll","ref_virtuallist","watch_item_props","maxReached","watch_options","options_filtered_override","options_filtered","resolveExcludedValue","list_length","setDropdownIndex","watch_listMessage","createFilterFn","inputVal","createHandlerFn","prefix","input_mode","placeholder_active","enter_hint","aria_selection","o","aria_context","valueProp","labelProp","clearSelection","ivalue","ilabel","equals","prevValue","passedVal","ifArrayThenNonEmpty","arrValue","newSelectedKeys","_selection","deselectOption","selectOption","asObjects","asValues","selection_formatted","disabled_to_set","updateDropdownState","alreadyRendered","listMessage","objectSelection","valueSelection","onSelect","onDeselect","newObj","onSelectTeardown","previousSelected","backspacePressed","_","on_create","processKeyDown","Tab","ctrlKey","isPageEvent","supressIndexMove","get_dropdown_dimensions","dix","activeDropdownItem","preventCreation","on_click","dropdown_item","focusControl","bound_item","dataId","opt_position","on_key_down","on_key_up","on_focus","on_blur","fetch_controller","on_paste","rx","pasted","matches","on_dnd_event","debouncedFetch","trigger_fetch","watch_fetch_init","_parentValue","initialFetchValue","built","resp","json","fetchAborted","direction","limit","dropdown_list_length","consequent_2","select","text_5","option_1_value","option_1","consequent_3","consequent_4","consequent_6","consequent_5","alternate","input","consequent_7","consequent_8","node_16","consequent_9","consequent_10","text_6","classes_11","consequent_11","alternate_1","node_26","text_7","classes_12","consequent_13","alternate_2","consequent_14","consequent_12","alternate_3","consequent_15","div_10","div_9","node_31","consequent_16","consequent_17","classes_2","$.set_attribute","span_6","classes_8","$5","$.bind_value","moveTip","tip","cancelHide","clampToViewport","goHome","navigateTo","goUp","__2","fullPath","parent","getParent","goBack","__3","histIdx","setPath","history","fetchFolders","goForward","__4","onPathKeydown","__5","sortOpen","on_click_1","__6","chooseSort","on_click_2","__7","on_click_3","__8","ageOpen","on_click_4","__9","chooseAge","on_click_5","__10","on_click_6","__11","on_click_7","__12","copyText","folder","COLORS","folders","files","loading","sortBy","selectedUser","userColors","userDropdown","pathInput","isEditing","colorRenderer","_isSelection","base","icon_bg","user_css","seedUserColors","usernames","uname","user","color","colorForUsername","cached","h","ageFilter","AGE_LABELS","displayAgeLabel","bubbleEl","MARGIN","ARROW_GAP","rawX","rawY","ww","wh","halfW","minX","maxX","minY","maxY","showTip","userData","percent","rightValueForUser","hideTip","hideTimer","transformFolders","raw","filter","ages","rf","usersAgg","total_count","total_disk","max_atime","max_mtime","userEntries","agesMap","u_count","u_disk","u_atime","u_mtime","s","dk","at","mt","toNum","v","sortedFolders","aVal","bVal","maxMetric","vals","pct","p","clamped","displaySortBy","clickOutside","cb","close","onPointerDown","onKeyDown","metricValue","file","rightValue","formatBytes","userMetricFor","ud","sortedUserEntries","aggregatePathTotals","foldersArr","filesArr","accessed","modified","aggUsers","owner","pathTotals","fileMetricValue","sortedfiles","maxFileMetric","parentTotal","filePct","rightValueFile","createDoItAgain","running","nextArgs","argsNow","_p","userFilter","pushHistory","onUserChanged","copyFeedbackVisible","newPath","displayedPath","displayPath","truncatePathFromStart","inputPath","maxLength","parts","potential","onPathFocus","onPathBlur","textToCopy","showCopyFeedback","getOptimalColors","$.action","div_2","$$node","$$action_arg","div_5","div_11","$$item","$$array","userMetric","totalMetric","userPercent","$.event","div_12","$.index","node_6","div_29","$$array_1","div_30","humanTime","text_3","humanCount","node_8","text_9","div_47","text_11","text_12","text_13","button","button_1","button_2"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,7,8,9,10,11,12,13,14,15,16,17]}